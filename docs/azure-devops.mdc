---
title: Azure DevOps Complete Pipeline Reference
provider: Azure DevOps
generated_at: 2025-07-08T13:30:17.102Z
pages_included: 8
---

# Azure DevOps Complete Pipeline Reference

This comprehensive guide contains all pipeline, workflow, and build configuration documentation for Azure DevOps.

## Table of Contents


1. [YAML schema reference for Azure Pipelines](#section-1)
2. [Add stages, dependencies, and conditions](#section-2)
3. [404 - Page not found](#section-3)
4. [Task types & usage](#section-4)
5. [Build, test, and deploy Android apps](#section-5)
6. [Build, test, and deploy Xcode apps](#section-6)
7. [Define variables](#section-7)
8. [Artifacts in Azure Pipelines - overview](#section-8)


---


## 1. YAML schema reference for Azure Pipelines {#section-1}

*Source: [https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema)*

Table of contents Exit focus mode

Ask LearnAsk Learn

Table of contents[Read in English](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/?view=azure-pipelines)Add to CollectionsAdd to plan[Edit](https://github.com/MicrosoftDocs/azure-devops-yaml-schema/blob/main/content/index.md)

* * *

#### Share via

[Facebook](https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fyaml-schema%2F%3Fview%3Dazure-pipelines%26WT.mc_id%3Dfacebook) [x.com](https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fyaml-schema%2F%3Fview%3Dazure-pipelines%26WT.mc_id%3Dtwitter&text=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fyaml-schema%2F%3Fview%3Dazure-pipelines%26WT.mc_id%3Dtwitter&tw_p=tweetbutton&url=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fyaml-schema%2F%3Fview%3Dazure-pipelines%26WT.mc_id%3Dtwitter) [LinkedIn](https://www.linkedin.com/feed/?shareActive=true&text=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fyaml-schema%2F%3Fview%3Dazure-pipelines%26WT.mc_id%3Dlinkedin) [Email](mailto:?subject=%5BShared%20Article%5D%20YAML%20schema%20reference%20%7C%20Microsoft%20Learn&body=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fyaml-schema%2F%3Fview%3Dazure-pipelines%26WT.mc_id%3Demail)

* * *

Print

* * *

Note

Access to this page requires authorization. You can try [signing in](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/?view=azure-pipelines#) or changing directories.


Access to this page requires authorization. You can try changing directories.


# YAML schema reference for Azure Pipelines

- 06/18/2025

Feedback

The YAML schema reference for Azure Pipelines is a detailed reference for YAML pipelines that lists all supported YAML syntax and their available options.

To create a YAML pipeline, start with the [pipeline](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/pipeline?view=azure-pipelines#remarks) definition. For more information about building YAML pipelines, see [Customize your pipeline](https://learn.microsoft.com/en-us/azure/devops/pipelines/customize-pipeline).

The YAML schema reference does not cover tasks. For more information about tasks, see the [Azure Pipelines tasks index](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference).

[Section titled: Definitions](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/?view=azure-pipelines#definitions)

## Definitions

[**pipeline**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/pipeline?view=azure-pipelines)

A pipeline is one or more stages that describe a CI/CD process. The pipeline definition contains the documentation for root level properties like `name`.

[**extends**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/extends?view=azure-pipelines)

Extends a pipeline using a template.

[**jobs**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/jobs?view=azure-pipelines)

Specifies the jobs that make up the work of a stage.

[**jobs.deployment**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/jobs-deployment?view=azure-pipelines)

A deployment job is a special type of job. It's a collection of steps to run sequentially against the environment.

[**jobs.deployment.environment**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/jobs-deployment-environment?view=azure-pipelines)

Target environment name and optionally a resource name to record the deployment history; format: environment-name.resource-name.

[**jobs.deployment.strategy**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/jobs-deployment-strategy?view=azure-pipelines)

Execution strategy for this deployment.

[**jobs.deployment.strategy.canary**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/jobs-deployment-strategy-canary?view=azure-pipelines)

Canary Deployment strategy.

[**jobs.deployment.strategy.rolling**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/jobs-deployment-strategy-rolling?view=azure-pipelines)

Rolling Deployment strategy.

[**jobs.deployment.strategy.runOnce**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/jobs-deployment-strategy-run-once?view=azure-pipelines)

RunOnce Deployment strategy.

[**jobs.job**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/jobs-job?view=azure-pipelines)

A job is a collection of steps run by an agent or on a server.

[**jobs.job.container**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/jobs-job-container?view=azure-pipelines)

Container resource name.

[**jobs.job.strategy**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/jobs-job-strategy?view=azure-pipelines)

Execution strategy for this job.

[**jobs.job.uses**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/jobs-job-uses?view=azure-pipelines)

Any resources required by this job that are not already referenced.

[**jobs.template**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/jobs-template?view=azure-pipelines)

A set of jobs defined in a template.

[**parameters**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/parameters?view=azure-pipelines)

Specifies the runtime parameters passed to a pipeline.

[**parameters.parameter**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/parameters-parameter?view=azure-pipelines)

Pipeline template parameters.

[**pool**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/pool?view=azure-pipelines)

Which pool to use for a job of the pipeline.

[**pool.demands**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/pool-demands?view=azure-pipelines)

Demands (for a private pool).

[**pr**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/pr?view=azure-pipelines)

Pull request trigger.

[**resources**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources?view=azure-pipelines)

Resources specifies builds, repositories, pipelines, and other resources used by the pipeline.

[**resources.builds**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-builds?view=azure-pipelines)

List of build resources referenced by the pipeline.

[**resources.builds.build**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-builds-build?view=azure-pipelines)

A build resource used to reference artifacts from a run.

[**resources.containers**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-containers?view=azure-pipelines)

List of container images.

[**resources.containers.container**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-containers-container?view=azure-pipelines)

A container resource used to reference a container image.

[**resources.containers.container.trigger**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-containers-container-trigger?view=azure-pipelines)

Specify none to disable, true to trigger on all image tags, or use the full syntax as described in the following examples.

[**resources.packages**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-packages?view=azure-pipelines)

List of package resources.

[**resources.packages.package**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-packages-package?view=azure-pipelines)

A package resource used to reference a NuGet or npm GitHub package.

[**resources.pipelines**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-pipelines?view=azure-pipelines)

List of pipeline resources.

[**resources.pipelines.pipeline**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-pipelines-pipeline?view=azure-pipelines)

A pipeline resource.

[**resources.pipelines.pipeline.trigger**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-pipelines-pipeline-trigger?view=azure-pipelines)

Specify none to disable, true to include all branches, or use the full syntax as described in the following examples.

[**resources.pipelines.pipeline.trigger.branches**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-pipelines-pipeline-trigger-branches?view=azure-pipelines)

Branches to include or exclude for triggering a run.

[**resources.repositories**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-repositories?view=azure-pipelines)

List of repository resources.

[**resources.repositories.repository**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-repositories-repository?view=azure-pipelines)

A repository resource is used to reference an additional repository in your pipeline.

[**resources.webhooks**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-webhooks?view=azure-pipelines)

List of webhooks.

[**resources.webhooks.webhook**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-webhooks-webhook?view=azure-pipelines)

A webhook resource enables you to integrate your pipeline with an external service to automate the workflow.

[**resources.webhooks.webhook.filters**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-webhooks-webhook-filters?view=azure-pipelines)

List of trigger filters.

[**resources.webhooks.webhook.filters.filter**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/resources-webhooks-webhook-filters-filter?view=azure-pipelines)

Webhook resource trigger filter.

[**schedules**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/schedules?view=azure-pipelines)

The schedules list specifies the scheduled triggers for the pipeline.

[**schedules.cron**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/schedules-cron?view=azure-pipelines)

A scheduled trigger specifies a schedule on which branches are built.

[**stages**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/stages?view=azure-pipelines)

Stages are a collection of related jobs.

[**stages.stage**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/stages-stage?view=azure-pipelines)

A stage is a collection of related jobs.

[**stages.template**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/stages-template?view=azure-pipelines)

You can define a set of stages in one file and use it multiple times in other files.

[**steps**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/steps?view=azure-pipelines)

Steps are a linear sequence of operations that make up a job.

[**steps.bash**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/steps-bash?view=azure-pipelines)

Runs a script in Bash on Windows, macOS, and Linux.

[**steps.checkout**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/steps-checkout?view=azure-pipelines)

Configure how the pipeline checks out source code.

[**steps.download**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/steps-download?view=azure-pipelines)

Downloads artifacts associated with the current run or from another Azure Pipeline that is associated as a pipeline resource.

[**steps.downloadBuild**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/steps-download-build?view=azure-pipelines)

Downloads build artifacts.

[**steps.getPackage**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/steps-get-package?view=azure-pipelines)

Downloads a package from a package management feed in Azure Artifacts or Azure DevOps Server.

[**steps.powershell**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/steps-powershell?view=azure-pipelines)

Runs a script using either Windows PowerShell (on Windows) or pwsh (Linux and macOS).

[**steps.publish**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/steps-publish?view=azure-pipelines)

Publishes (uploads) a file or folder as a pipeline artifact that other jobs and pipelines can consume.

[**steps.pwsh**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/steps-pwsh?view=azure-pipelines)

Runs a script in PowerShell Core on Windows, macOS, and Linux.

[**steps.reviewApp**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/steps-review-app?view=azure-pipelines)

Downloads creates a resource dynamically under a deploy phase provider.

[**steps.script**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/steps-script?view=azure-pipelines)

Runs a script using cmd.exe on Windows and Bash on other platforms.

[**steps.task**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/steps-task?view=azure-pipelines)

Runs a task.

[**steps.template**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/steps-template?view=azure-pipelines)

Define a set of steps in one file and use it multiple times in another file.

[**target**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/target?view=azure-pipelines)

Tasks run in an execution context, which is either the agent host or a container.

[**target.settableVariables**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/target-settable-variables?view=azure-pipelines)

Restrictions on which variables that can be set.

[**trigger**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/trigger?view=azure-pipelines)

Continuous integration (push) trigger.

[**variables**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/variables?view=azure-pipelines)

Define variables using name/value pairs.

[**variables.group**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/variables-group?view=azure-pipelines)

Reference variables from a variable group.

[**variables.name**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/variables-name?view=azure-pipelines)

Define variables using name and full syntax.

[**variables.template**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/variables-template?view=azure-pipelines)

Define variables in a template.

[Section titled: Supporting definitions](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/?view=azure-pipelines#supporting-definitions)

## Supporting definitions

Note

Supporting definitions are not intended for use directly in a pipeline. Supporting definitions are used only as part of other definitions, and are included here for reference.

[**deployHook**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/deploy-hook?view=azure-pipelines)

Used to run steps that deploy your application.

[**includeExcludeFilters**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/include-exclude-filters?view=azure-pipelines)

Lists of items to include or exclude.

[**includeExcludeStringFilters**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/include-exclude-string-filters?view=azure-pipelines)

Items to include or exclude.

[**mountReadOnly**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/mount-read-only?view=azure-pipelines)

Volumes to mount read-only, the default is all false.

[**onFailureHook**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/on-failure-hook?view=azure-pipelines)

Used to run steps for rollback actions or clean-up.

[**onSuccessHook**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/on-success-hook?view=azure-pipelines)

Used to run steps for rollback actions or clean-up.

[**onSuccessOrFailureHook**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/on-success-or-failure-hook?view=azure-pipelines)

Used to run steps for rollback actions or clean-up.

[**postRouteTrafficHook**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/post-route-traffic-hook?view=azure-pipelines)

Used to run the steps after the traffic is routed. Typically, these tasks monitor the health of the updated version for defined interval.

[**preDeployHook**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/pre-deploy-hook?view=azure-pipelines)

Used to run steps that initialize resources before application deployment starts.

[**routeTrafficHook**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/route-traffic-hook?view=azure-pipelines)

Used to run steps that serve the traffic to the updated version.

[**workspace**](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/workspace?view=azure-pipelines)

Workspace options on the agent.

[Section titled: YAML schema documentation conventions](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/?view=azure-pipelines#yaml-schema-documentation-conventions)

## YAML schema documentation conventions

The YAML schema reference is a detailed reference guide to Azure Pipelines YAML pipelines.
It includes a catalog of all supported YAML capabilities and the available options.

Here are the syntax conventions used in the YAML schema reference.

- To the left of `:` is a literal keyword used in pipeline definitions.
- To the right of `:` is a data type.
The data type can be a primitive type like **string** or a reference to a rich structure defined elsewhere in this reference.
- The notation `[` _datatype_ `]` indicates an array of the mentioned definition type.
For instance, `[ string ]` is an array of strings.
- The notation `{` _datatype_ `:` _datatype_ `}` indicates a mapping of one data type to another.
For instance, `{ string: string }` is a mapping of strings to strings.
- The symbol `|` indicates there are multiple data types available for the keyword.
For instance, `job | template` means either a job definition or a template reference is allowed.

[Section titled: See also](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/?view=azure-pipelines#see-also)

## See also

This reference covers the schema of an Azure Pipelines YAML file.
To learn the basics of YAML, see [Learn YAML in Y Minutes](https://learnxinyminutes.com/docs/yaml/).
Azure Pipelines doesn't support all YAML features.
Unsupported features include anchors, complex keys, and sets.
Also, unlike standard YAML, Azure Pipelines depends on seeing `stage`, `job`, `task`, or a task shortcut like `script` as the first key in a mapping.

* * *

## Feedback

Was this page helpful?


YesNo

* * *

## Additional resources

Please sign in to use this experience.

[Sign in](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/?view=azure-pipelines#)

---


## 2. Add stages, dependencies, and conditions {#section-2}

*Source: [https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages)*

Table of contents Exit focus mode

Ask LearnAsk Learn

Table of contents[Read in English](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml)Add to CollectionsAdd to plan[Edit](https://github.com/MicrosoftDocs/azure-devops-docs/blob/main/docs/pipelines/process/stages.md)

* * *

#### Share via

[Facebook](https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Fstages%3Fview%3Dazure-devops%26tabs%3Dyaml%26WT.mc_id%3Dfacebook) [x.com](https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Fstages%3Fview%3Dazure-devops%26tabs%3Dyaml%26WT.mc_id%3Dtwitter&text=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Fstages%3Fview%3Dazure-devops%26tabs%3Dyaml%26WT.mc_id%3Dtwitter&tw_p=tweetbutton&url=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Fstages%3Fview%3Dazure-devops%26tabs%3Dyaml%26WT.mc_id%3Dtwitter) [LinkedIn](https://www.linkedin.com/feed/?shareActive=true&text=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Fstages%3Fview%3Dazure-devops%26tabs%3Dyaml%26WT.mc_id%3Dlinkedin) [Email](mailto:?subject=%5BShared%20Article%5D%20Stages%20in%20Azure%20Pipelines%20-%20Azure%20Pipelines%20%7C%20Microsoft%20Learn&body=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Fstages%3Fview%3Dazure-devops%26tabs%3Dyaml%26WT.mc_id%3Demail)

* * *

Print

* * *

Note

Access to this page requires authorization. You can try [signing in](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#) or changing directories.


Access to this page requires authorization. You can try changing directories.


# Add stages, dependencies, and conditions

- 04/29/2025

Feedback

**Azure DevOps Services \| Azure DevOps Server 2022 - Azure DevOps Server 2019**

A stage is a logical boundary in an Azure DevOps pipeline. Stages group actions in your software development process, like building the app, running tests, and deploying to preproduction. Each stage contains one or more jobs.

When you define multiple stages in a pipeline, by default, they run one after the other. Stages can also depend on each other. You can use the `dependsOn` keyword to define [dependencies](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#specify-dependencies). Stages also can run based on the result of a previous stage with [conditions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#conditions).

To learn how stages work with parallel jobs and licensing, see [Configure and pay for parallel jobs](https://learn.microsoft.com/en-us/azure/devops/pipelines/licensing/concurrent-jobs?view=azure-devops).

To find out how stages relate to other parts of a pipeline such as jobs, see [Key pipelines concepts](https://learn.microsoft.com/en-us/azure/devops/pipelines/get-started/key-pipelines-concepts?view=azure-devops).

You can also learn more about how stages relate to parts of a pipeline in the [YAML schema stages article](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/stages).

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#tabpanel_1_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#tabpanel_1_classic)

You can organize pipeline jobs into stages. Stages are the major divisions in a pipeline: build this app, run these tests, and deploy to preproduction are good examples of stages. They're logical boundaries in your pipeline where you can pause the pipeline and perform various checks.

Every pipeline has at least one stage, even if you don't explicitly define it. You can also arrange stages into a dependency graph so that one stage runs before another one. A stage can have up to 256 jobs.

Organize the deployment jobs in your release pipeline into stages.
Stages are the major divisions in your release pipeline. Examples include running functional tests, deploying to preproduction, and deploying to production.

A stage in a release pipeline consists of [jobs](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/phases?view=azure-devops) and [tasks](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops).

[Approvals and gates](https://learn.microsoft.com/en-us/azure/devops/pipelines/release/approvals/?view=azure-devops), [deployment conditions and triggers](https://learn.microsoft.com/en-us/azure/devops/pipelines/release/triggers?view=azure-devops#stage-triggers),
and [queuing policies](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#queuing-policies) control when a release gets deployed to a stage.

![stage](https://learn.microsoft.com/en-us/azure/devops/pipelines/release/media/definition-02.png?view=azure-devops)

[Section titled: Specify stages](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#specify-stages)

## Specify stages

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#tabpanel_2_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#tabpanel_2_classic)

In the simplest case, you don't need logical boundaries in your pipeline. For those scenarios, you can directly specify the jobs in your YAML file without the `stages` keyword. For example, if you have a simple pipeline that builds and tests a small application without requiring separate environments or deployment steps, you can define all the jobs directly without using stages.

Copy

```lang-yaml
pool:
  vmImage: 'ubuntu-latest'

jobs:
- job: BuildAndTest
  steps:
  - script: echo "Building the application"
  - script: echo "Running tests"

```

This pipeline has one implicit stage and two jobs. The `stages` keyword isn't used because there's only one stage.

Copy

```lang-yaml
jobs:
- job: Build
  steps:
  - bash: echo "Building"

- job: Test
  steps:
  - bash: echo "Testing"

```

To organize your pipeline into multiple stages, use the `stages` keyword. This YAML defines a pipeline with two stages where each stage contains multiple jobs, and each job has specific steps to execute.

Copy

```lang-yaml
stages:
- stage: A
  displayName: "Stage A - Build and Test"
  jobs:
  - job: A1
    displayName: "Job A1 - build"
    steps:
    - script: echo "Building the application in Job A1"
      displayName: "Build step"
  - job: A2
    displayName: "Job A2 - Test"
    steps:
    - script: echo "Running tests in Job A2"
      displayName: "Test step"

- stage: B
  displayName: "Stage B - Deploy"
  jobs:
  - job: B1
    displayName: "Job B1 - Deploy to Staging"
    steps:
    - script: echo "Deploying to staging in Job B1"
      displayName: "Staging deployment step"
  - job: B2
    displayName: "Job B2 - Deploy to Production"
    steps:
    - script: echo "Deploying to production in Job B2"
      displayName: "Production deployment step"

```

If you specify a `pool` at the stage level, all jobs in that stage use that pool unless the stage is specified at the job level.

Copy

```lang-yaml
stages:
- stage: A
  pool: StageAPool
  jobs:
  - job: A1 # will run on "StageAPool" pool based on the pool defined on the stage
  - job: A2 # will run on "JobPool" pool
    pool: JobPool

```

To add a stage to your release pipeline, select the release pipeline on the **Releases** page, select **Edit**, and then select the **Pipeline** tab.
While the most important part of defining a stage is the
automation tasks, you can also configure several properties and options
for a stage in a release pipeline. You can:

- Edit the name of the stage here if necessary.
- Designate one user or a
group to be the stage owner. Stage owners get
notified whenever a deployment to that
stage fails. Stage ownership doesn't automatically include permissions.
- Delete the stage from the pipeline.
- Change the order of stages.
- Save a copy of the stage as a [stage template](https://learn.microsoft.com/en-us/azure/devops/pipelines/release/env-templates?view=azure-devops).
- Manage the security settings for the stage.

![Defining options and policies](https://learn.microsoft.com/en-us/azure/devops/pipelines/release/media/environments-03.png?view=azure-devops)

[Section titled: Specify dependencies](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#specify-dependencies)

## Specify dependencies

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#tabpanel_3_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#tabpanel_3_classic)

When you define multiple stages in a pipeline, they run sequentially by default in the order you define them in the YAML file. The exception to this is when you add dependencies. With dependencies, stages run in the order of the `dependsOn` requirements.

Pipelines must contain at least one stage with no dependencies.

For more information on how to define stages, see [stages in the YAML schema](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/stages).

The following example stages run sequentially. If you don't use a `dependsOn` keyword, stages run in the order they're defined.

Copy

```lang-yaml
stages:
- stage: Build
  displayName: "Build Stage"
  jobs:
  - job: BuildJob
    steps:
    - script: echo "Building the application"
      displayName: "Build Step"

- stage: Test
  displayName: "Test Stage"
  jobs:
  - job: TestJob
    steps:
    - script: echo "Running tests"
      displayName: "Test Step"

```

Example stages that run in parallel:

Copy

```lang-yaml
stages:
- stage: FunctionalTest
  displayName: "Functional Test Stage"
  jobs:
  - job: FunctionalTestJob
    steps:
    - script: echo "Running functional tests"
      displayName: "Run Functional Tests"

- stage: AcceptanceTest
  displayName: "Acceptance Test Stage"
  dependsOn: [] # Runs in parallel with FunctionalTest
  jobs:
  - job: AcceptanceTestJob
    steps:
    - script: echo "Running acceptance tests"
      displayName: "Run Acceptance Tests"

```

Example of fan-out and fan-in behavior:

Copy

```lang-yaml
stages:
- stage: Test

- stage: DeployUS1
  dependsOn: Test    #  stage runs after Test

- stage: DeployUS2
  dependsOn: Test    # stage runs in parallel with DeployUS1, after Test

- stage: DeployEurope
  dependsOn:         # stage runs after DeployUS1 and DeployUS2
  - DeployUS1
  - DeployUS2

```

Control dependencies by setting triggers on each stage of the release pipeline:

- Stages run with a trigger or are manually started.
- With an **After release** trigger, a stage starts as soon as the release begins, running in parallel with other stages that have the same trigger.
- With an **After stage** trigger, a stage starts after all dependent stages complete. Using this, you can model fan-out and fan-in behavior for stages.

[Section titled: Define conditions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#define-conditions)

## Define conditions

You can specify the conditions under which each stage runs with [expressions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/expressions?view=azure-devops). By default, a stage runs if it doesn't depend on any other stage, or if all of the stages that it depends on have completed and succeeded. You can customize this behavior by forcing a stage to run even if a previous stage fails or by specifying a custom condition.

If you customize the default condition of the preceding steps for a stage, you remove the conditions for completion and success. So, if you use a custom condition, it's common to use `and(succeeded(),custom_condition)` to check whether the preceding stage ran successfully. Otherwise, the stage runs regardless of the outcome of the preceding stage.

Note

Conditions for failed ('JOBNAME/STAGENAME') and succeeded ('JOBNAME/STAGENAME') as shown in the following example work only for [YAML pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml).

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#tabpanel_4_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#tabpanel_4_classic)

Example to run a stage based upon the status of running a previous stage:

Copy

```lang-yaml
stages:
- stage: A

# stage B runs if A fails
- stage: B
  condition: failed()

# stage C runs if B succeeds
- stage: C
  dependsOn:
  - A
  - B
  condition: succeeded('B')

```

Example of using a [custom condition](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/conditions?view=azure-devops):

Copy

```lang-yaml
stages:
- stage: A

- stage: B
  condition: and(succeeded(), eq(variables['build.sourceBranch'], 'refs/heads/main'))

```

When you specify **After release** or **After stage** triggers, you can also specify the branch filters for the artifacts consumed in the release. Releases will only deploy to a stage when the branch filters are satisfied.

[Section titled: Specify queuing policies](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#specify-queuing-policies)

## Specify queuing policies

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#tabpanel_5_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#tabpanel_5_classic)

YAML pipelines don't support queuing policies. Each run of a pipeline is independent from and unaware of other runs. In other words, your two successive commits might trigger two pipelines, and both of them will execute the same sequence of stages without waiting for each other. While we work to bring queuing policies to YAML pipelines, we recommend that you use [manual approvals](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/approvals?view=azure-devops) in order to manually sequence and control the order the execution if this is of importance.

In some cases, you might be able to generate builds faster than
they can be deployed. Alternatively, you might configure multiple
[agents](https://learn.microsoft.com/en-us/azure/devops/pipelines/agents/agents?view=azure-devops) and, for example, be creating releases from the same release pipeline
for deployment of different artifacts. In such cases, it's useful to
be able to control how multiple releases are queued into a
stage. **Queuing policies** give you that control.

![Defining queuing policies](https://learn.microsoft.com/en-us/azure/devops/pipelines/release/media/environments-02.png?view=azure-devops)

The options you can choose for a queuing policy are:

- **Number of parallel deployments**:
Use this option if you dynamically provision new resources in your stage and it's physically capable of handling the deployment of multiple releases in parallel, but you want to limit the number of parallel deployments.

- If you specify a maximum number of deployments, two more options appear:

  - **Deploy all in sequence**:
    Use this option if you want to deploy all the releases sequentially into the same shared physical resources.
    By deploying the builds in turn, one after the other, you ensure that two deployment jobs don't target the same physical resources concurrently, even if there are multiple build and release agents available. You also ensure that predeployment approval requests for the stage are sent out in sequence.

  - **Deploy latest and cancel the others**:
    Use this option if you're producing builds faster than releases, and you only want to deploy the latest build.

To understand how these options work, consider a scenario
where releases **R1**, **R2**, **...**, **R5** of a
single release pipeline get created in quick succession.
Assume that
the first stage in this pipeline is named **QA**
and has both predeployment and post-deployment approvers
defined.

- If you don't specify a limit for the number of parallel deployments,
all five approval requests are sent out as soon as
the releases are created. If the approvers approve all of the
releases, they'll all be deployed to the **QA** stage in parallel.
(if the **QA** stage didn't have any predeployment
approvers defined, all the five releases will automatically
be deployed in parallel to this stage).

- If you specify a limit and **Deploy all in sequence**,
and the limit has already been reached, the predeployment approval for
release **R1** will be sent out first. After this
approval is completed, the deployment of release **R1** to the
**QA** stage begins. Next, a request for
post-deployment approval is sent out for release **R1**. It's
only after this post-deployment approval is completed that
execution of release **R2** begins and its predeployment
approval is sent out. The process continues like this for
all of the releases in turn.

- If you specify a limit and **Deploy latest and cancel the others**,
and the limit has already been reached, releases **R2**, **R3**, and **R4** will be
skipped, and the predeployment approval for **R5** in
the **QA** stage will be sent out immediately
after the post-deployment approval for release **R1** is completed.


[Section titled: Specify approvals](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#specify-approvals)

## Specify approvals

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#tabpanel_6_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#tabpanel_6_classic)

You can manually control when a stage should run using approval checks. This is commonly used to control deployments to production environments. Checks are a mechanism available to the _resource owner_ to control if and when a stage in a pipeline can consume a resource. As an owner of a resource, such as an environment, you can define checks that must be satisfied before a stage consuming that resource can start.

Currently, manual approval checks are supported on environments. For more information, see [Approvals](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/approvals?view=azure-devops).

You can add manual approvals at the start or end of each stage in the pipeline. For more information, see [Release approvals and gates overview](https://learn.microsoft.com/en-us/azure/devops/pipelines/release/approvals/?view=azure-devops).

[Section titled: Add a manual trigger](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#add-a-manual-trigger)

## Add a manual trigger

Manually triggered YAML pipeline stages enable you to have a unified pipeline without always running it to completion.

For instance, your pipeline might include stages for building, testing, deploying to a staging environment, and deploying to production. You might want all stages to run automatically except for the production deployment, which you prefer to trigger manually when ready.

To use this feature, add the `trigger: manual` property to a stage.

In the following example, the development stage runs automatically, while the production stage requires manual triggering. Both stages run a hello world output script.

Copy

```lang-yaml
stages:
- stage: Development
  displayName: Deploy to development
  jobs:
  - job: DeployJob
    steps:
    - script: echo 'hello, world'
      displayName: 'Run script'
- stage: Production
  displayName: Deploy to production
  trigger: manual
  jobs:
  - job: DeployJob
    steps:
    - script: echo 'hello, world'
      displayName: 'Run script'

```

[Section titled: Mark a stage as unskippable](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#mark-a-stage-as-unskippable)

## Mark a stage as unskippable

Mark a stage as `isSkippable: false` to prevent pipeline users from skipping stages. For example, you might have a YAML template that injects a stage that performs malware detection in all pipelines. If you set `isSkippable: false` for this stage, your pipeline won't be able to skip malware detection.

In the following example, the Malware detection stage is marked as nonskippable, meaning it must be executed as part of the pipeline run.

Copy

```lang-yaml
- stage: malware_detection
  displayName: Malware detection
  isSkippable: false
  jobs:
  - job: check_job
    ...

```

When a stage is nonskippable, it shows with a disabled checkbox in the **Stages to run** configuration panel.

![Screenshot of stages to run with disabled stage. ](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/media/stages/stages-run-skip-stage.png?view=azure-devops)

* * *

## Feedback

Was this page helpful?


YesNo

* * *

## Additional resources

Training


Module


[Create a Multistage Pipeline by Using Azure Pipelines - Training](https://learn.microsoft.com/en-us/training/modules/create-multi-stage-pipeline/?source=recommendations)

Design and create a realistic release pipeline that promotes changes to various testing and staging environments.


Please sign in to use this experience.

[Sign in](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages?view=azure-devops&tabs=yaml#)

---


## 3. 404 - Page not found {#section-3}

*Source: [https://learn.microsoft.com/en-us/azure/devops/pipelines/process/jobs](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/jobs)*

[Skip to main content](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/jobs#main)

This browser is no longer supported.

Upgrade to Microsoft Edge to take advantage of the latest features, security updates, and technical support.

[Download Microsoft Edge](https://go.microsoft.com/fwlink/p/?LinkID=2092881) [More info about Internet Explorer and Microsoft Edge](https://learn.microsoft.com/en-us/lifecycle/faq/internet-explorer-microsoft-edge)

Table of contents

![](https://learn.microsoft.com/en-us/media/learn/not-found/learn-not-found-dark-mode.png?branch=main)![](https://learn.microsoft.com/en-us/media/learn/not-found/learn-not-found-light-mode.png?branch=main)

# 404 - Page not found

We couldn't find this page. You can try [signing in](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/jobs#), or choosing from the relevant [search results](https://learn.microsoft.com/en-us/search/index?search=azure%20devops%20pipelines%20process%20jobs) below:

We couldn't find this page. You can try [changing directories](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/jobs#), or choosing from the relevant [search results](https://learn.microsoft.com/en-us/search/index?search=azure%20devops%20pipelines%20process%20jobs) below:

- [Customize your pipeline - Azure Pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/customize-pipeline)
- [Use runtime and type-safe parameters - Azure Pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/runtime-parameters)
- [Stages in Azure Pipelines - Azure Pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/stages)
- [What is Azure Pipelines? - Azure Pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/get-started/what-is-azure-pipelines)
- [Configure and pay for parallel jobs - Azure DevOps](https://learn.microsoft.com/en-us/azure/devops/pipelines/licensing/concurrent-jobs)

---


## 4. Task types & usage {#section-4}

*Source: [https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks)*

Table of contents Exit focus mode

Ask LearnAsk Learn

Table of contents[Read in English](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml)Add to CollectionsAdd to plan[Edit](https://github.com/MicrosoftDocs/azure-devops-docs/blob/main/docs/pipelines/process/tasks.md)

* * *

#### Share via

[Facebook](https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Ftasks%3Fview%3Dazure-devops%26tabs%3Dyaml%26WT.mc_id%3Dfacebook) [x.com](https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Ftasks%3Fview%3Dazure-devops%26tabs%3Dyaml%26WT.mc_id%3Dtwitter&text=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Ftasks%3Fview%3Dazure-devops%26tabs%3Dyaml%26WT.mc_id%3Dtwitter&tw_p=tweetbutton&url=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Ftasks%3Fview%3Dazure-devops%26tabs%3Dyaml%26WT.mc_id%3Dtwitter) [LinkedIn](https://www.linkedin.com/feed/?shareActive=true&text=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Ftasks%3Fview%3Dazure-devops%26tabs%3Dyaml%26WT.mc_id%3Dlinkedin) [Email](mailto:?subject=%5BShared%20Article%5D%20Task%20types%20%26%20usage%20-%20Azure%20Pipelines%20%7C%20Microsoft%20Learn&body=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Ftasks%3Fview%3Dazure-devops%26tabs%3Dyaml%26WT.mc_id%3Demail)

* * *

Print

* * *

Note

Access to this page requires authorization. You can try [signing in](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#) or changing directories.


Access to this page requires authorization. You can try changing directories.


# Task types & usage

- 01/09/2025

Feedback

**Azure DevOps Services \| Azure DevOps Server 2022 - Azure DevOps Server 2019**

A **task** performs an action in a pipeline and is a packaged script or procedure that's
abstracted with a set of inputs. Tasks are the building blocks for defining automation in a pipeline.

When you run a [job](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/phases?view=azure-devops), all the tasks are run in sequence, one after the other.
To run the same set of tasks in parallel on multiple agents, or to run some tasks without using an agent, see [jobs](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/phases?view=azure-devops).

By default, all tasks run in the same context, whether that's on the [host](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/phases?view=azure-devops) or in a [job container](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/container-phases?view=azure-devops).

You might optionally use [step targets](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#step-target) to control context for an individual task.

Learn more about how to specify properties for a task with the [built-in tasks](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/?view=azure-devops).

To learn more about the general attributes supported by tasks, see the [YAML Reference for _steps.task_](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/steps-task).

[Section titled: Custom tasks](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#custom-tasks)

## Custom tasks

Azure DevOps includes [built-in tasks](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/?view=azure-devops)
to enable fundamental build and deployment scenarios. You also can [create your own custom task](https://learn.microsoft.com/en-us/azure/devops/extend/develop/add-build-task?view=azure-devops).

In addition, [Visual Studio Marketplace](https://marketplace.visualstudio.com/azuredevops)
offers many extensions; each of which, when installed to your
subscription or collection, extends the task catalog with one or more tasks.
You can also write your own [custom extensions](https://learn.microsoft.com/en-us/azure/devops/integrate/?view=azure-devops)
to add tasks to Azure Pipelines.

In YAML pipelines, you refer to tasks by name. If a name matches both an in-box task
and a custom task, the in-box task takes precedence. You can use the task GUID or a fully qualified
name for the custom task to avoid this risk:

Copy

```lang-yaml
steps:
- task: myPublisherId.myExtensionId.myContributionId.myTaskName@1 #format example
- task: qetza.replacetokens.replacetokens-task.replacetokens@3 #working example

```

To find `myPublisherId` and `myExtensionId`, select **Get** on a task in the marketplace. The values after the `itemName` in your URL string are `myPublisherId` and `myExtensionId`. You can also find the fully qualified name by adding the task to a [Release pipeline](https://learn.microsoft.com/en-us/azure/devops/pipelines/release/releases?view=azure-devops) and selecting **View YAML** when editing the task.

[Section titled: Task versions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#task-versions)

## Task versions

Tasks are versioned, and you must specify the major version of the task used in your
pipeline. This can help to prevent issues when new versions of a task are released.
Tasks are typically backwards compatible, but in some scenarios you may
encounter unpredictable errors when a task is automatically updated.

When a new minor version is released (for example, 1.2 to 1.3), your pipeline
automatically uses the new version. However, if a new major version is released
(for example 2.0), your pipeline continues to use the major version you specified
until you edit the pipeline and manually change to the new major version.
The log will include an alert that a new major version is available.

You can set which minor version gets used by specifying the full version number of a task after the `@` sign (example: `GoTool@0.3.1`). You can only use task versions that exist for your [organization](https://learn.microsoft.com/en-us/azure/devops/organizations/accounts/organization-management?view=azure-devops).

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#tabpanel_1_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#tabpanel_1_classic)

In YAML, you specify the major version using `@` in the task name.
For example, to pin to version 2 of the `PublishTestResults` task:

Copy

```lang-yaml
steps:
- task: PublishTestResults@2

```

Each task in a pipeline has a **Version** selector to let you choose the version you want.

If you select a preview version (such as **1.\* Preview**), the
version is still under development and might have issues.

If you change the version and have problems with your builds, you can revert the pipeline change from the **History** tab.
The ability to restore to an older version of a release pipeline isn't currently available. You must manually revert the changes to the release pipeline, then save the pipeline.

Consider cloning the pipeline and testing the cloned pipeline with the new major task version.

[Section titled: Task control options](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#task-control-options)

## Task control options

Each task offers you some **Control Options**.

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#tabpanel_2_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#tabpanel_2_classic)

Control options are available as keys on the `task` section.

Copy

```lang-yaml
- task: string # Required as first property. Name of the task to run.
  inputs: # Inputs for the task.
    string: string # Name/value pairs
  condition: string # Evaluate this condition expression to determine whether to run this task.
  continueOnError: boolean # Continue running even on failure?
  displayName: string # Human-readable name for the task.
  target: string | target # Environment in which to run this task.
  enabled: boolean # Run this task when the job runs?
  env: # Variables to map into the process's environment.
    string: string # Name/value pairs
  name: string # ID of the step.
  timeoutInMinutes: string # Time to wait for this task to complete before the server kills it.

```

Control options are available as keys on the `task` section.

Copy

```lang-yaml
- task: string # Required as first property. Name of the task to run.
  inputs: # Inputs for the task.
    string: string # Name/value pairs
  condition: string # Evaluate this condition expression to determine whether to run this task.
  continueOnError: boolean # Continue running even on failure?
  displayName: string # Human-readable name for the task.
  target: string | target # Environment in which to run this task.
  enabled: boolean # Run this task when the job runs?
  env: # Variables to map into the process's environment.
    string: string # Name/value pairs
  name: string # ID of the step.
  timeoutInMinutes: string # Time to wait for this task to complete before the server kills it.
  retryCountOnTaskFailure: string # Number of retries if the task fails.

```

Note

A given task or job can't unilaterally decide whether the job/stage continues. What it can do is offer a status of **succeeded** or **failed**, and downstream tasks/jobs each have a condition computation that lets them decide whether to run or not. The default condition which is effectively "run if we're in a successful state".

**Continue on error** alters this in a subtle way. It effectively "tricks" all downstream steps/jobs into treating any result as "success" for the purposes of making that decision. Or to put it another way, it says "don't consider the failure of this task when you're making a decision about the condition of the containing structure".

The timeout period begins when the task starts running. It doesn't include the
time the task is queued or is waiting for an agent.

Note

Pipelines may have a job level timeout specified in addition to a task level timeout. If the job level timeout interval elapses before your step completes, the running job is terminated, even if the step is configured with a longer timeout interval. For more information, see [Timeouts](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/phases?view=azure-devops#timeouts).

In this YAML, `PublishTestResults@2` runs even if the previous step fails because of the [succeededOrFailed() condition](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/expressions?view=azure-devops#succeededorfailed).

Copy

```lang-yaml
steps:
- task: UsePythonVersion@0
  inputs:
    versionSpec: '3.x'
    architecture: 'x64'
- task: PublishTestResults@2
  inputs:
    testResultsFiles: "**/TEST-*.xml"
  condition: succeededOrFailed()

```

[Section titled: Conditions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#conditions)

### Conditions

- Only when all previous direct and indirect dependencies with the same agent pool succeed. If you have different agent pools, those stages or jobs run concurrently. This condition is the default if no condition is set in the YAML.

- Even if a previous dependency fails, unless the run is canceled. Use `succeededOrFailed()` in the YAML for this condition.

- Even if a previous dependency fails, and even if the run is canceled. Use `always()` in the YAML for this condition.

- Only when a previous dependency fails. Use `failed()` in the YAML for this condition.


- [Custom conditions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/conditions?view=azure-devops), which are composed of [expressions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/expressions?view=azure-devops)

[Section titled: Step target](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#step-target)

### Step target

Tasks run in an execution context, which is either the agent host or a container.
An individual step might override its context by specifying a `target`.
Available options are the word `host` to target the agent host plus any containers defined in the pipeline.
For example:

Copy

```lang-yaml
resources:
  containers:
  - container: pycontainer
    image: python:3.11

steps:
- task: SampleTask@1
  target: host
- task: AnotherTask@1
  target: pycontainer

```

Here, the `SampleTask` runs on the host and `AnotherTask` runs in a container.

[Section titled: Number of retries if task failed](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#number-of-retries-if-task-failed)

### Number of retries if task failed

Use `retryCountOnTaskFailure` to specify the number of retries if the task fails. The default is zero retries. For more information on task properties, see [steps.task in the YAML Schema](https://learn.microsoft.com/en-us/azure/devops/pipelines/yaml-schema/steps-task).

Copy

```lang-yml
- task: <name of task>
  retryCountOnTaskFailure: <max number of retries>
   ...

```

Note

- Requires agent version 2.194.0 or later. On Azure DevOps Server 2022, retries are not supported for [agentless tasks](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/phases?view=azure-devops#agentless-jobs-supported-tasks). For more information, see [Azure DevOps service update November 16, 2021 - Automatic retries for a task](https://learn.microsoft.com/en-us/azure/devops/release-notes/2021/sprint-195-update#automatic-retries-for-a-task), and [Azure DevOps service update June 14, 2025 - Retries for server tasks](https://learn.microsoft.com/en-us/azure/devops/release-notes/2024/sprint-240-update#retries-for-server-tasks).
- The maximum number of retries allowed is 10.
- The wait time between each retry increases after each failed attempt, following an exponential backoff strategy. The 1st retry happens after 1 second, the 2nd retry after 4 seconds, and the 10th retry after 100 seconds.
- There is no assumption about the idempotency of the task. If the task has side-effects (for instance, if it created an external resource partially), then it may fail the second time it is run.
- There is no information about the retry count made available to the task.
- A warning is added to the task logs indicating that it has failed before it is retried.
- All of the attempts to retry a task are shown in the UI as part of the same task node.

[Section titled: Enabled](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#enabled)

### Enabled

Clear this check box to disable a task. This is useful
when you want to temporarily take task out of the process for testing or for specific deployments.

Tip

You can also right-click the task to toggle this setting.

[Section titled: Timeout](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#timeout)

### Timeout

The timeout for this task in minutes. The default is zero (infinite timeout).
Setting a value other than zero overrides the setting for the parent task job.
The timeout period begins when the task starts running. It doesn't include the
time the task is queued or is waiting for an agent.

[Section titled: Azure Pipelines options](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#azure-pipelines-options)

### Azure Pipelines options

[Section titled: Continue on error (partially successful)](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#continue-on-error-partially-successful)

#### Continue on error (partially successful)

Select this option if you want subsequent tasks in the same job to possibly run even if this task fails. The build or deployment will be no better than partially successful. Whether subsequent tasks run depends on the **Run this task** setting.

[Section titled: Number of retries if task failed](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#number-of-retries-if-task-failed-1)

#### Number of retries if task failed

Specify the number of retries if this task fails. The default is zero.

Note

- The failing task retries in seconds. The wait time between each retry increases after each failed attempt.
- There is no assumption about the idempotency of the task. If the task has side-effects (for instance, if it created an external resource partially), then it may fail the second time it is run.
- There is no information about the retry count made available to the task.
- A warning is added to the task logs indicating that it has failed before it is retried.
- All of the attempts to retry a task are shown in the UI as part of the same task node.

[Section titled: Run this task](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#run-this-task)

#### Run this task

Select the condition for running this task:

- Only when all previous direct and indirect dependencies with the same agent pool succeed. If you have different agent pools, those stages or jobs run concurrently. This condition is the default if no condition is set in the YAML.

- Even if a previous dependency fails, unless the run is canceled. Use `succeededOrFailed()` in the YAML for this condition.

- Even if a previous dependency fails, and even if the run is canceled. Use `always()` in the YAML for this condition.

- Only when a previous dependency fails. Use `failed()` in the YAML for this condition.


- [Custom conditions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/conditions?view=azure-devops), which are composed of [expressions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/expressions?view=azure-devops)

Note

If you're running tasks in cases when the build is canceled, then make sure you specify sufficient time for these tasks to run the [pipeline options](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/phases?view=azure-devops#timeouts).

[Section titled: Continue on error (partially successful)](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#continue-on-error-partially-successful-1)

#### Continue on error (partially successful)

Select this option if you want subsequent tasks in the same job to run even if this task fails. The build or deployment will be no better than partially successful.

[Section titled: Always run](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#always-run)

#### Always run

Select this check box if you want the task to run even if the build or deployment is failing.

[Section titled: Environment variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#environment-variables)

## Environment variables

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#tabpanel_3_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#tabpanel_3_classic)

Each task has an `env` property that is a list of string pairs that represent environment variables mapped into the task process.

Copy

```lang-yml
- task: AzureCLI@2
  displayName: Azure CLI
  inputs: # Specific to each task
  env:
    ENV_VARIABLE_NAME: value
    ENV_VARIABLE_NAME2: value
  ...

```

The following example runs the `script` step, which is a shortcut for the [Command line task](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/cmd-line-v2), followed by the equivalent task syntax. This example assigns a value to the `AZURE_DEVOPS_EXT_PAT` environment variable, which is used to authenticating with Azure DevOps CLI.

Copy

```lang-yml
# Using the script shortcut syntax
- script: az pipelines variable-group list --output table
  env:
    AZURE_DEVOPS_EXT_PAT: $(System.AccessToken)
  displayName: 'List variable groups using the script step'

# Using the task syntax
- task: CmdLine@2
  inputs:
    script: az pipelines variable-group list --output table
  env:
    AZURE_DEVOPS_EXT_PAT: $(System.AccessToken)
  displayName: 'List variable groups using the command line task'

```

Copy

```lang-yml
- task: Bash@3
  inputs:
     targetType: # specific to each task
  env:
    ENV_VARIABLE_NAME: value
    ENV_VARIABLE_NAME2: value
  ...

```

The following example runs the `script` step, which is a shortcut for the [Bash@3](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/bash-v3), followed by the equivalent task syntax. This example assigns a value to the `ENV_VARIABLE_NAME` environment variable and echoes the value.

Copy

```lang-yml
# Using the script shortcut syntax
- script: echo "This is " $ENV_VARIABLE_NAME
  env:
    ENV_VARIABLE_NAME: "my value"
  displayName: 'echo environment variable'

# Using the task syntax
- task: Bash@2
  inputs:
    script: echo "This is " $ENV_VARIABLE_NAME
  env:
    ENV_VARIABLE_NAME: "my value"
  displayName: 'echo environment variable'

```

You can work with environment variables using the **Environment Variables** section of the task editor.

![Task environment variables.](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/media/tasks/task-environment-variables.png?view=azure-devops)

[Section titled: Build tool installers (Azure Pipelines)](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#tool-installers)

## Build tool installers (Azure Pipelines)

Tool installers enable your build pipeline to install and control your dependencies. Specifically, you can:

- Install a tool or runtime on the fly (even on [Microsoft-hosted agents](https://learn.microsoft.com/en-us/azure/devops/pipelines/agents/hosted?view=azure-devops)) just in time for your CI build.

- Validate your app or library against multiple versions of a dependency such as Node.js.


For example, you can set up your build pipeline to run and validate your app for multiple versions of Node.js.

[Section titled: Example: Test and validate your app on multiple versions of Node.js](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#example-test-and-validate-your-app-on-multiple-versions-of-nodejs)

### Example: Test and validate your app on multiple versions of Node.js

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#tabpanel_4_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#tabpanel_4_classic)

Create an azure-pipelines.yml file in your project's base directory with the following contents.

Copy

```lang-yaml
pool:
  vmImage: ubuntu-latest

steps:
# Node install
- task: UseNode@1
  displayName: Node install
  inputs:
    version: '16.x' # The version we're installing
# Write the installed version to the command line
- script: which node

```

[Create a new build pipeline](https://learn.microsoft.com/en-us/azure/devops/pipelines/create-first-pipeline?view=azure-devops) and run it. Observe how the build is run.
The [Node.js Tool Installer](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/node-tool-v0) downloads the Node.js version if it isn't already on the agent. The [Command Line](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/cmd-line-v2) script logs the location of the Node.js version on disk.

[Section titled: Tasks tab](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#tasks-tab)

#### Tasks tab

[Create a new build pipeline](https://learn.microsoft.com/en-us/azure/devops/pipelines/create-first-pipeline?view=azure-devops) (start with an empty process) to try this out.

Apply the following agent settings:

1. Set **Parallelism** to **Multi-configuration**

2. Specify **Multipliers**:


Copy

```
NodeVersionSpec

```

3. Set **Maximum number of agents** to 2

Add these tasks:

![node js installer](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/tool/media/node.png?view=azure-devops) Tool: Node.js Installer

- Version Spec:

Copy




```
$(NodeVersionSpec)

```


![CLI](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/utility/media/command-line.png?view=azure-devops) Utility: Command Line

- Script (if you're running on a Windows agent)

Copy




```
where node

```

- Script (if you're running on a macOS or Linux agent)

Copy




```
which node

```


[Section titled: Variables tab](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#variables-tab)

#### Variables tab

On the [Variables tab](https://learn.microsoft.com/en-us/azure/devops/pipelines/build/variables?view=azure-devops), define this variable:

Expand table

| Name | Value | Settable at queue time |
| --- | --- | --- |
| `NodeVersionSpec` | `10.x, 12.x` | Selected |

[Section titled: Save & queue](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#save--queue)

#### Save & queue

Select **Save & queue**. Observe how two builds are run. The [Node.js Tool Installer](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/node-tool-v0) downloads each of the Node.js versions if they aren't already on the agent. The [Command Line](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/cmd-line-v2) task logs the location of the Node.js version on disk.

[Section titled: Tool installer tasks](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#tool-installer-tasks)

### Tool installer tasks

For a list of our tool installer tasks, see [Tool installer tasks](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/?view=azure-devops#tool).

[Section titled: Disabling in-box and Marketplace tasks](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#disabling-in-box-and-marketplace-tasks)

### Disabling in-box and Marketplace tasks

On the organization settings page, you can disable Marketplace tasks, in-box tasks, or both.
Disabling Marketplace tasks can help [increase security](https://learn.microsoft.com/en-us/azure/devops/pipelines/security/misc?view=azure-devops) of your pipelines.
If you disable both in-box and Marketplace tasks, only tasks you install using [`tfx`](https://www.npmjs.com/package/tfx-cli) is available.

[Section titled: Related articles](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#related-articles)

## Related articles

- [Jobs](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/phases?view=azure-devops)
- [Task groups](https://learn.microsoft.com/en-us/azure/devops/pipelines/library/task-groups?view=azure-devops)
- [Built-in task catalog](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/?view=azure-devops)

[Section titled: Help and support](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#help-and-support)

## Help and support

- Explore [troubleshooting tips](https://learn.microsoft.com/en-us/azure/devops/pipelines/troubleshooting/troubleshooting?view=azure-devops).
- Get advice on [Stack Overflow](https://stackoverflow.com/questions/tagged/azure-devops).
- Post your questions, search for answers, or suggest a feature in the [Azure DevOps Developer Community](https://developercommunity.visualstudio.com/spaces/21/index.html).
- Get [support for Azure DevOps](https://azure.microsoft.com/support/devops/).

**Note:** The author created this article with assistance from AI. [Learn more](https://learn.microsoft.com/principles-for-ai-generated-content)

* * *

## Feedback

Was this page helpful?


YesNo

* * *

## Additional resources

Training


Module


[Manage and modularize tasks and templates - Training](https://learn.microsoft.com/en-us/training/modules/manage-modularize-tasks-templates/?source=recommendations)

Manage and modularize tasks and templates


Please sign in to use this experience.

[Sign in](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/tasks?view=azure-devops&tabs=yaml#)

---


## 5. Build, test, and deploy Android apps {#section-5}

*Source: [https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android)*

Table of contents Exit focus mode

Ask LearnAsk Learn

Table of contents[Read in English](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops)Add to CollectionsAdd to plan[Edit](https://github.com/MicrosoftDocs/azure-devops-docs/blob/main/docs/pipelines/ecosystems/android.md)

* * *

#### Share via

[Facebook](https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fecosystems%2Fandroid%3Fview%3Dazure-devops%26WT.mc_id%3Dfacebook) [x.com](https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fecosystems%2Fandroid%3Fview%3Dazure-devops%26WT.mc_id%3Dtwitter&text=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fecosystems%2Fandroid%3Fview%3Dazure-devops%26WT.mc_id%3Dtwitter&tw_p=tweetbutton&url=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fecosystems%2Fandroid%3Fview%3Dazure-devops%26WT.mc_id%3Dtwitter) [LinkedIn](https://www.linkedin.com/feed/?shareActive=true&text=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fecosystems%2Fandroid%3Fview%3Dazure-devops%26WT.mc_id%3Dlinkedin) [Email](mailto:?subject=%5BShared%20Article%5D%20Build%2C%20test%2C%20and%20deploy%20Android%20apps%20-%20Azure%20Pipelines%20%7C%20Microsoft%20Learn&body=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fecosystems%2Fandroid%3Fview%3Dazure-devops%26WT.mc_id%3Demail)

* * *

Print

* * *

Note

Access to this page requires authorization. You can try [signing in](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#) or changing directories.


Access to this page requires authorization. You can try changing directories.


# Build, test, and deploy Android apps

- 02/04/2025

Feedback

**Azure DevOps Services**

This quickstart shows you how to set up a YAML pipeline in Azure Pipelines to automatically build, test, and deploy an Android app.

[Section titled: Prerequisites](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#prerequisites)

## Prerequisites

- An Azure DevOps organization and project where you have permission to create pipelines and deploy apps. To create a project, see [Create a project in Azure DevOps](https://learn.microsoft.com/en-us/azure/devops/organizations/projects/create-project?view=azure-devops).

- A GitHub account.



Important



During GitHub procedures, you might be prompted to create a [GitHub service connection](https://learn.microsoft.com/en-us/azure/devops/pipelines/library/service-endpoints?view=azure-devops#github-service-connection) or be redirected to GitHub to sign in, install Azure Pipelines, authorize Azure Pipelines, or authenticate to GitHub organizations. Follow the onscreen instructions to complete the process. For more information, see [Access to GitHub repositories](https://learn.microsoft.com/en-us/azure/devops/pipelines/repos/github?view=azure-devops#access-to-github-repositories).


[Section titled: Create and run the pipeline](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#create-and-run-the-pipeline)

## Create and run the pipeline

Do the following tasks to set up a pipeline for a simple Android application.

1. To get the code for the sample app, fork the [Android sample app](https://github.com/MicrosoftDocs/pipelines-android) repository to your GitHub account.
2. In your Azure DevOps project, select **Pipelines** \> **New pipeline**, or **Create pipeline** if this pipeline is the first in the project.
3. Select **GitHub** as the location of your source code.
4. On the **Select a repository** screen, select your forked Android sample repository.
5. On the **Configure your pipeline** screen, select **Android**.
6. Azure Pipelines provides a starter pipeline based on the [Android](https://github.com/microsoft/azure-pipelines-yaml/blob/master/templates/android.yml) template. Review the pipeline code.
7. Select **Save and run**.
8. Optionally, edit the **Commit message** and provide a description. Then select **Save and run** again to commit the _azure-pipelines.yml_ file to your repository and start a build.

The build run page shows build details and progress. If you want to watch your pipeline in action, select **Job** on the lower part of the page.

You now have a working Android YAML pipeline, _azure-pipelines.yml_, in your repository that's ready to customize.

[Section titled: Customize your pipeline](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#customize-your-pipeline)

## Customize your pipeline

To make changes to your pipeline, select **Edit** on the pipeline page. The following sections describe some common ways to customize your Android pipeline.

[Section titled: Configure Gradle](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#configure-gradle)

### Configure Gradle

The starter YAML pipeline uses Gradle, a common open-source build tool for Android projects. For more information, see the [Gradle task](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/gradle-v3).

In the example task, the `tasks` parameter builds the `assembleDebug` build type. You can adjust the `tasks` value for the build variants you want, such as `build`, `test`, and `assembleRelease`.

The example task also assumes that your `gradlew` file is at the root of the repository. If not, adjust the `workingDirectory` and `gradleWrapperFile` values accordingly.

The `workingDirectory` should be similar to the root of the repository, such as `AndroidApps/MyApp` or `$(system.defaultWorkingDirectory)/AndroidApps/MyApp`. The `gradleWrapperFile` path should be similar to the root of the repository, such as `AndroidApps/MyApp/gradlew` or `$(system.defaultWorkingDirectory)/AndroidApps/MyApp/gradlew`.

Copy

```lang-yaml
- task: Gradle@3
  inputs:
    workingDirectory: ''
    gradleWrapperFile: 'gradlew'
    gradleOptions: '-Xmx3072m'
    publishJUnitResults: false
    testResultsFiles: '**/TEST-*.xml'
    tasks: 'assembleDebug'

```

For more information about using Gradle tasks, see [Using tasks](https://docs.gradle.org/current/userguide/tutorial_using_tasks.html) in the Gradle documentation. For more information about build tasks, see [Build a debug APK](https://developer.android.com/studio/build/building-cmdline#DebugMode) and [Configure build variants](https://developer.android.com/studio/build/build-variants.html) in the Google Android development documentation.

[Section titled: Sign and align the Android package (APK)](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#sign-and-align-the-android-package-apk)

### Sign and align the Android package (APK)

To run on a device instead of an emulator, the Android Application Package (APK) must be signed. Zipaligning reduces the RAM the application consumes. If your build doesn't already [sign and zipalign](https://developer.android.com/studio/publish/app-signing) the APK, add the [Android Signing](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/android-signing-v3) task to the pipeline. For more information, see [Sign a mobile app](https://learn.microsoft.com/en-us/azure/devops/pipelines/apps/mobile/app-signing?view=azure-devops).

For security, store the `apksignerKeystorePassword` and `apksignerKeyPassword` in [secret variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops#secret-variables) and use those variables in your pipeline.

Copy

```lang-yaml
- task: AndroidSigning@3
  inputs:
    apkFiles: '**/*.apk' # Specify the APK files to sign
    apksignerKeystoreFile: 'pathToYourKeystoreFile' # Path to the keystore file
    apksignerKeystorePassword: '$(apksignerKeystorePassword)' # Use a secret variable for security
    apksignerKeystoreAlias: 'yourKeystoreAlias' # Alias for the keystore
    apksignerKeyPassword: '$(apksignerKeyPassword)' # Use a secret variable for security
    apksignerVersion: 'latest' # Use the latest version of apksigner
    apksignerArguments: '--verbose' # Optional: Additional arguments for apksigner
    zipalign: true # Enable zipalign to optimize APK
    zipalignVersion: 'latest' # Use the latest version of zipalign

```

[Section titled: Test on the Android emulator](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#test-on-the-android-emulator)

### Test on the Android emulator

To install and run the Android emulator, add the [Bash](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/bash-v3) task to your pipeline, and paste in the following code. The emulator starts as a background process and is available in later tasks. Arrange the emulator parameters to fit your testing environment.

Important

If you're using a [Microsoft-hosted agent](https://learn.microsoft.com/en-us/azure/devops/pipelines/agents/hosted?view=azure-devops), use the macOS agent image with the Android emulator. Current Android emulators require hardware acceleration to start. Azure DevOps hosted Ubuntu agents do not support hardware acceleration.

Copy

```lang-yaml
- task: Bash@3
  inputs:
    targetType: 'inline'
    script: |
      #!/usr/bin/env bash

      # Install AVD files
      echo "y" | $ANDROID_HOME/cmdline-tools/latest/bin/sdkmanager --install 'system-images;android-35;google_apis;x86_64'

      # Create emulator
      echo "y" | $ANDROID_HOME/cmdline-tools/latest/bin/avdmanager create avd -n xamarin_android_emulator -d "Nexus 10" -k 'system-images;android-35;google_apis;x86_64' --force

      echo "y" | $ANDROID_HOME/emulator/emulator -list-avds

      echo "Starting emulator"

      # Start emulator in background
      nohup $ANDROID_HOME/emulator/emulator -avd xamarin_android_emulator -no-snapshot -no-window -no-audio -no-boot-anim -accel on > /dev/null 2>&1 &
      # Fixed quoting around "\r"
      $ANDROID_HOME/platform-tools/adb wait-for-device shell 'while [[ -z $(getprop sys.boot_completed | tr -d "\r") ]]; do sleep 1; done; input keyevent 82'

      $ANDROID_HOME/platform-tools/adb devices

      echo "Emulator started"

```

[Section titled: Test on Azure-hosted devices](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#test-on-azure-hosted-devices)

### Test on Azure-hosted devices

To test your app in a hosted lab of Android devices in the Visual Studio App Center, add the [App Center Test](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/app-center-test-v1) task to your pipeline.

This task requires an [App Center](https://appcenter.ms/) free trial account, which must be converted to paid after 30 days to continue to use the test lab. [Sign up for an App Center account](https://appcenter.ms/signup?utm_source=DevOps&utm_medium=Azure&utm_campaign=docs) before you use this task.

Warning

Visual Studio App Center is scheduled for retirement on March 31, 2025. [Learn more about support timelines and recommended alternatives.](https://aka.ms/appcenter/retire)

[Sign up with App Center](https://appcenter.ms/signup?utm_source=DevOps&utm_medium=Azure&utm_campaign=docs) first.

The following example runs an App Center test suite. The task uses a [service connection](https://learn.microsoft.com/en-us/azure/devops/pipelines/library/service-endpoints?view=azure-devops#visual-studio-app-center-service-connection) that you must set up.

For the complete task syntax and reference, see [App Center Test task](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/app-center-test-v1). For more information, see [Using Azure DevOps for UI Testing](https://learn.microsoft.com/en-us/appcenter/test-cloud/vsts-plugin).

Copy

```lang-yml
- task: AppCenterTest@1
  inputs:
    appFile: path/myapp.ipa
    artifactsDirectory: '$(Build.ArtifactStagingDirectory)/AppCenterTest'
    frameworkOption: 'appium'
    appiumBuildDirectory: test/upload
    serverEndpoint: 'My App Center service connection'
    appSlug: username/appIdentifier
    devices: 'devicelist'

```

[Section titled: Keep artifacts with the build record](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#keep-artifacts-with-the-build-record)

### Keep artifacts with the build record

To store your APK file with the build record or test and deploy it in subsequent pipelines, add the [Copy Files](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/copy-files-v2) and [Publish Build Artifacts](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/publish-build-artifacts-v1) tasks to your pipeline. For more information, see [Publish and download pipeline artifacts](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/pipeline-artifacts?view=azure-devops).

Copy

```lang-yaml
- task: CopyFiles@2
  inputs:
    contents: '**/*.apk'
    targetFolder: '$(build.artifactStagingDirectory)'
- task: PublishBuildArtifacts@1
  inputs:
    pathToPublish: $(Build.ArtifactStagingDirectory)
    artifactName: MyBuildOutputs

```

[Section titled: Deploy to App Center](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#deploy-to-app-center)

### Deploy to App Center

To distribute an app to a group of testers or beta users, or promote the app to Intune or Google Play, add the [App Center Distribute](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/app-center-distribute-v3) task. The task requires a free [App Center](https://appcenter.ms/) account that remains free of charge.

The following example distributes an app to users. For the complete task syntax and reference, see [App Center Distribute](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/app-center-distribute-v3). For more information, see [Deploy Azure DevOps Builds with App Center](https://learn.microsoft.com/en-us/appcenter/distribution/vsts-deploy).

Copy

```lang-yml
- task: AppCenterDistribute@3
  inputs:
    serverEndpoint: 'AppCenter'
    appSlug: '$(APP_CENTER_SLUG)'
    appFile: '$(APP_FILE)' # Relative path from the repo root to the APK file you want to publish
    symbolsOption: 'Android'
    releaseNotesOption: 'input'
    releaseNotesInput: 'Here are the release notes for this version.'
    destinationType: 'groups'

```

[Section titled: Install the Google Play extension and deploy to Google Play](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#install-the-google-play-extension-and-deploy-to-google-play)

### Install the Google Play extension and deploy to Google Play

To automate interaction with Google Play, install the [Google Play extension](https://marketplace.visualstudio.com/items?itemName=ms-vsclient.google-play) and then use the following tasks. By default, these tasks authenticate to Google Play by using a [service connection](https://learn.microsoft.com/en-us/azure/devops/pipelines/library/service-endpoints?view=azure-devops) that you must configure.

[Section titled: Release](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#release)

#### Release

To release a new Android app version to the Google Play store, add the [Google Play Release](https://marketplace.visualstudio.com/items?itemName=ms-vsclient.google-play#user-content-google-play---release) task to your pipeline.

Copy

```lang-yaml
- task: GooglePlayRelease@4
  inputs:
    apkFile: '**/*.apk'
    serviceEndpoint: 'yourGooglePlayServiceConnectionName'
    track: 'internal'

```

[Section titled: Promote](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#promote)

#### Promote

To promote a previously released Android application update from one track to another, such as `alpha`  `beta`, add the [Google Play Promote](https://marketplace.visualstudio.com/items?itemName=ms-vsclient.google-play#user-content-google-play---promote) task to your pipeline.

Copy

```lang-yaml
- task: GooglePlayPromote@3
  inputs:
    packageName: 'com.yourCompany.appPackageName'
    serviceEndpoint: 'yourGooglePlayServiceConnectionName'
    sourceTrack: 'internal'
    destinationTrack: 'alpha'

```

[Section titled: Increase rollout](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#increase-rollout)

#### Increase rollout

To increase the rollout percentage of an application that was previously released to the `rollout` track, add the [Google Play Increase Rollout](https://marketplace.visualstudio.com/items?itemName=ms-vsclient.google-play#user-content-google-play---increase-rollout) task to your pipeline.

Copy

```lang-yaml
- task: GooglePlayIncreaseRollout@2
  inputs:
    packageName: 'com.yourCompany.appPackageName'
    serviceEndpoint: 'yourGooglePlayServiceConnectionName'
    userFraction: '0.5' # 0.0 to 1.0 (0% to 100%)

```

[Section titled: Update status](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#update-status)

#### Update status

To update the rollout status for an application that was previously released to the `rollout` track, add the [Google Play Status Update](https://marketplace.visualstudio.com/items?itemName=ms-vsclient.google-play#user-content-google-play---status-update) task to your pipeline.

Copy

```lang-yaml
  - task: GooglePlayStatusUpdate@2
    inputs:
      authType: ServiceEndpoint
      packageName: 'com.yourCompany.appPackageName'
      serviceEndpoint: 'yourGooglePlayServiceConnectionName'
      status: 'inProgress' # draft | inProgress | halted | completed

```

[Section titled: Create an app bundle](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#create-an-app-bundle)

## Create an app bundle

You can build and sign an app bundle with an inline script and a secure file.

1. Download your keystore and store it as a [secure file](https://learn.microsoft.com/en-us/azure/devops/pipelines/library/secure-files?view=azure-devops) in the Azure Pipelines library.

2. Create variables for `keystore.password`, `key.alias`, and `key.password` in a [variable group](https://learn.microsoft.com/en-us/azure/devops/pipelines/library/variable-groups?view=azure-devops).


In your YAML pipeline:

1. Add the [Download Secure File](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/download-secure-file-v1) task to download the _app.keystore_ secure file.

Copy




```lang-yaml
- task: DownloadSecureFile@1
name: keyStore
displayName: "Download keystore from secure files"
inputs:
    secureFile: app.keystore

```

2. Use the [Bash](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/bash-v3) task with a Bash script to build and sign the app bundle.

Copy




```lang-yaml
- task: Bash@3
displayName: "Build and sign App Bundle"
inputs:
    targetType: "inline"
    script: |
      msbuild -restore $(Build.SourcesDirectory)/myAndroidApp/*.csproj -t:SignAndroidPackage -p:AndroidPackageFormat=aab -p:Configuration=$(buildConfiguration) -p:AndroidKeyStore=True -p:AndroidSigningKeyStore=$(keyStore.secureFilePath) -p:AndroidSigningStorePass=$(keystore.password) -p:AndroidSigningKeyAlias=$(key.alias) -p:AndroidSigningKeyPass=$(key.password)

```

3. Use the [Copy Files](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/copy-files-v2) task to copy the app bundle.

Copy




```lang-yaml
- task: CopyFiles@2
displayName: 'Copy deliverables'
inputs:
    SourceFolder: '$(Build.SourcesDirectory)/myAndroidApp/bin/$(buildConfiguration)'
    Contents: '*.aab'
    TargetFolder: 'drop'

```

From here, you can either create and save an artifact with the [Publish Build Artifact](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/publish-build-artifacts-v1) task or use the [Google Play extension](https://marketplace.visualstudio.com/items?itemName=ms-vsclient.google-play) to publish the app bundle.

[Section titled: Related extensions](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#related-extensions)

## Related extensions

- [Codified Security](https://marketplace.visualstudio.com/items?itemName=codifiedsecurity.CodifiedSecurity) from Codified Security
- [Google Play](https://marketplace.visualstudio.com/items?itemName=ms-vsclient.google-play) from Microsoft
- [Mobile App Tasks for iOS and Android](https://marketplace.visualstudio.com/items?itemName=vs-publisher-473885.motz-mobile-buildtasks) from James Montemagno
- [Mobile Testing Lab](https://marketplace.visualstudio.com/items?itemName=Perfecto.PerfectoCQ) from Perfecto Mobile
- [React Native](https://marketplace.visualstudio.com/items?itemName=ms-vsclient.react-native-extension) from Microsoft

* * *

## Feedback

Was this page helpful?


YesNo

* * *

## Additional resources

Training


Learning path


[Build applications with Azure DevOps learning path - Training](https://learn.microsoft.com/en-us/training/paths/build-applications-with-azure-devops/?source=recommendations)

In this learning path, find out how to collaborate with others to continuously build, test, and verify your applications using Azure Pipelines and GitHub.


Certification


[Microsoft Certified: Azure Developer Associate - Certifications](https://learn.microsoft.com/en-us/credentials/certifications/azure-developer/?source=recommendations)

Build end-to-end solutions in Microsoft Azure to create Azure Functions, implement and manage web apps, develop solutions utilizing Azure storage, and more.


Please sign in to use this experience.

[Sign in](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/android?view=azure-devops#)

---


## 6. Build, test, and deploy Xcode apps {#section-6}

*Source: [https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode)*

Table of contents Exit focus mode

Ask LearnAsk Learn

Table of contents[Read in English](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode?view=azure-devops)Add to CollectionsAdd to plan[Edit](https://github.com/MicrosoftDocs/azure-devops-docs/blob/main/docs/pipelines/ecosystems/xcode.md)

* * *

#### Share via

[Facebook](https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fecosystems%2Fxcode%3Fview%3Dazure-devops%26WT.mc_id%3Dfacebook) [x.com](https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fecosystems%2Fxcode%3Fview%3Dazure-devops%26WT.mc_id%3Dtwitter&text=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fecosystems%2Fxcode%3Fview%3Dazure-devops%26WT.mc_id%3Dtwitter&tw_p=tweetbutton&url=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fecosystems%2Fxcode%3Fview%3Dazure-devops%26WT.mc_id%3Dtwitter) [LinkedIn](https://www.linkedin.com/feed/?shareActive=true&text=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fecosystems%2Fxcode%3Fview%3Dazure-devops%26WT.mc_id%3Dlinkedin) [Email](mailto:?subject=%5BShared%20Article%5D%20Build%2C%20test%2C%20and%20deploy%20Xcode%20apps%20-%20Azure%20Pipelines%20%7C%20Microsoft%20Learn&body=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fecosystems%2Fxcode%3Fview%3Dazure-devops%26WT.mc_id%3Demail)

* * *

Print

* * *

Note

Access to this page requires authorization. You can try [signing in](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode?view=azure-devops#) or changing directories.


Access to this page requires authorization. You can try changing directories.


# Build, test, and deploy Xcode apps

- 10/14/2024

Feedback

**Azure DevOps Services \| Azure DevOps Server 2022 - Azure DevOps Server 2019**

This quickstart shows you how to build and deploy Xcode projects with YAML pipelines in Azure Pipelines.

[Section titled: Prerequisites](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode?view=azure-devops#prerequisites)

## Prerequisites

- An Azure DevOps organization and project where you have permission to create pipelines and deploy apps.
- An Xcode 9+ project and app in a GitHub repository. For more information, see [Creating an Xcode Project for an App](https://developer.apple.com/documentation/xcode/creating-an-xcode-project-for-an-app).

[Section titled: Create the pipeline](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode?view=azure-devops#create-the-pipeline)

## Create the pipeline

Important

During GitHub procedures, you might be prompted to create a [GitHub service connection](https://learn.microsoft.com/en-us/azure/devops/pipelines/library/service-endpoints?view=azure-devops#github-service-connection) or be redirected to GitHub to sign in, install Azure Pipelines, or authorize Azure Pipelines. Follow the onscreen instructions to complete the process. For more information, see [Access to GitHub repositories](https://learn.microsoft.com/en-us/azure/devops/pipelines/repos/github?view=azure-devops#access-to-github-repositories).

1. In your Azure DevOps project, select **Pipelines** \> **New pipeline**, or **Create pipeline** if this pipeline is the first in the project.
2. Select **GitHub** as the location of your source code.
3. On the **Select a repository** screen, select the repository for your Xcode project.
4. On the **Configure your pipeline** screen, select **Xcode**.

Azure Pipelines provides a starter pipeline based on the [Xcode](https://github.com/microsoft/azure-pipelines-yaml/blob/master/templates/xcode.yml) template. Review the code in _azure-pipelines.yml_.

[Section titled: Build environment](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode?view=azure-devops#build-environment)

### Build environment

Xcode is preinstalled on the [Microsoft-hosted macOS agents](https://learn.microsoft.com/en-us/azure/devops/pipelines/agents/hosted?view=azure-devops) in Azure Pipelines, so you don't have to set up any infrastructure. For the exact versions of Xcode that are preinstalled, see [Microsoft-hosted agents software](https://learn.microsoft.com/en-us/azure/devops/pipelines/agents/hosted?view=azure-devops#software).

The `pool` node at the top of your _azure-pipelines.yml_ file selects the appropriate agent pool.

Copy

```lang-yaml
pool:
  vmImage: 'macOS-latest'

```

[Section titled: Xcode build task](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode?view=azure-devops#xcode-build-task)

### Xcode build task

The [Xcode](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/xcode-v5) task builds, tests, or archives an Xcode workspace on macOS, and optionally can package an app. The Xcode step in the starter _azure-pipelines.yml_ file builds the iOS project using its default scheme, for the Simulator, and without packaging. You can change values and add parameters to match your project configuration.

Copy

```lang-yaml
steps:
- task: Xcode@5
  inputs:
    actions: 'build'
    scheme: ''
    sdk: 'iphoneos'
    configuration: 'Release'
    xcWorkspacePath: '**/*.xcodeproj/project.xcworkspace'
    xcodeVersion: 'default' # Options: 10, 11, 12, 13, 14, default, specifyPath

```

[Section titled: Save and run the pipeline](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode?view=azure-devops#save-and-run-the-pipeline)

## Save and run the pipeline

When you finish reviewing the code in _azure-pipelines.yml_, select **Save and run**.

![Screenshot of the Save and run button in a new YAML pipeline.](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/media/save-and-run-button-new-yaml-pipeline.png?view=azure-devops)

Optionally, edit the **Commit message** and provide a description. Then select **Save and run** again to commit the _azure-pipelines.yml_ file to your repository and start a build.

The build run page shows build details and progress. If you want to watch your pipeline in action, select **Job** on the lower part of the page.

You now have a working YAML pipeline, _azure-pipelines.yml_, in your repository that's ready to customize.

[Section titled: Customize your pipeline](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode?view=azure-devops#customize-your-pipeline)

## Customize your pipeline

To make changes to your pipeline, select **Edit** on the pipeline page. The following sections describe some common ways to customize your Xcode pipeline.

[Section titled: Add signing and provisioning tasks](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode?view=azure-devops#add-signing-and-provisioning-tasks)

### Add signing and provisioning tasks

An Xcode app must be signed and provisioned to be able to run on a device or publish to the App Store. The signing and provisioning process must access your P12 signing certificate and one or more provisioning profiles. For more information, see [Sign your mobile app](https://learn.microsoft.com/en-us/azure/devops/pipelines/apps/mobile/app-signing?view=azure-devops).

To make the certificate and profile available to Xcode during a build, add the [Install Apple Certificate](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/install-apple-certificate-v2) and [Install Apple Provisioning Profile](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/install-apple-provisioning-profile-v1) tasks to your pipeline.

[Section titled: Use a Carthage environment variable](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode?view=azure-devops#use-a-carthage-environment-variable)

### Use a Carthage environment variable

If your project uses Carthage with a private Carthage repository, you can set up authentication by using an environment variable named `GITHUB_ACCESS_TOKEN` with a value of a token that has access to the repository. Carthage automatically detects and uses this environment variable.

Don't add the secret token directly to your pipeline YAML. Instead, select **Variables** on the pipeline page to open the **Variables** pane and create a variable for this token. Be sure to enable the lock icon to encrypt the value of the variable. For more information, see [Set secret variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops#secret-variables).

The following pipeline code uses a secret variable named `myGitHubAccessToken` for the value of the `GITHUB_ACCESS_TOKEN` environment variable.

Copy

```lang-yaml
- script: carthage update --platform iOS
  env:
    GITHUB_ACCESS_TOKEN: $(myGitHubAccessToken)

```

[Section titled: Test on Azure-hosted devices](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode?view=azure-devops#test-on-azure-hosted-devices)

### Test on Azure-hosted devices

To test your app in a hosted lab of iOS devices in the Visual Studio App Center, add the [App Center Test](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/app-center-test-v1) task to your pipeline.

This task requires an [App Center](https://appcenter.ms/) free trial account, which must be converted to paid after 30 days to continue to use the test lab. [Sign up for an App Center account](https://appcenter.ms/signup?utm_source=DevOps&utm_medium=Azure&utm_campaign=docs) before you use this task.

Warning

Visual Studio App Center is scheduled for retirement on March 31, 2025. [Learn more about support timelines and recommended alternatives.](https://aka.ms/appcenter/retire)

[Sign up with App Center](https://appcenter.ms/signup?utm_source=DevOps&utm_medium=Azure&utm_campaign=docs) first.

The following example runs an App Center test suite. The task uses a [service connection](https://learn.microsoft.com/en-us/azure/devops/pipelines/library/service-endpoints?view=azure-devops#visual-studio-app-center-service-connection) that you must set up.

For the complete task syntax and reference, see [App Center Test task](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/app-center-test-v1). For more information, see [Using Azure DevOps for UI Testing](https://learn.microsoft.com/en-us/appcenter/test-cloud/vsts-plugin).

Copy

```lang-yml
- task: AppCenterTest@1
  inputs:
    appFile: path/myapp.ipa
    artifactsDirectory: '$(Build.ArtifactStagingDirectory)/AppCenterTest'
    frameworkOption: 'appium'
    appiumBuildDirectory: test/upload
    serverEndpoint: 'My App Center service connection'
    appSlug: username/appIdentifier
    devices: 'devicelist'

```

[Section titled: Keep artifacts with the build record](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode?view=azure-devops#keep-artifacts-with-the-build-record)

### Keep artifacts with the build record

To store your iOS AppStore Package (IPA) file with the build record or test and deploy it in subsequent pipelines, add the [Copy Files](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/copy-files-v2) and [Publish Build Artifacts](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/publish-build-artifacts-v1) tasks to your pipeline. For more information, see [Publish and download pipeline artifacts](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/pipeline-artifacts?view=azure-devops).

Copy

```lang-yaml
- task: CopyFiles@2
  inputs:
    contents: '**/*.ipa'
    targetFolder: '$(build.artifactStagingDirectory)'
- task: PublishBuildArtifacts@1
  inputs:
    PathtoPublish: '$(Build.ArtifactStagingDirectory)'
    ArtifactName: 'drop'
    publishLocation: 'Container'

```

[Section titled: Deploy to App Center](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode?view=azure-devops#deploy-to-app-center)

### Deploy to App Center

To distribute an app to a group of testers or beta users, or promote the app to Intune or the Apple App Store, add the [App Center Distribute](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/app-center-distribute-v3) task. The task requires a free [App Center](https://appcenter.ms/) account that remains free of charge.

The following example distributes an app to users. For the complete task syntax and reference, see [App Center Distribute](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/app-center-distribute-v3). For more information, see [Deploy Azure DevOps Builds with App Center](https://learn.microsoft.com/en-us/appcenter/distribution/vsts-deploy).

Copy

```lang-yml
- task: AppCenterDistribute@3
  inputs:
    serverEndpoint: 'AppCenter'
    appSlug: '$(APP_CENTER_SLUG)'
    appFile: '$(APP_FILE)' # Relative path from the repo root to the IPA file you want to publish
    symbolsOption: 'Apple'
    releaseNotesOption: 'input'
    releaseNotesInput: 'Here are the release notes for this version.'
    destinationType: 'groups'

```

[Section titled: Install the Apple App Store extension and deploy to Apple App Store](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode?view=azure-devops#install-the-apple-app-store-extension-and-deploy-to-apple-app-store)

### Install the Apple App Store extension and deploy to Apple App Store

To automate interaction with the Apple App Store, install the [Apple App Store extension](https://marketplace.visualstudio.com/items?itemName=ms-vsclient.app-store), and then use the following tasks in your pipeline. By default, these tasks authenticate to Apple by using a [service connection](https://learn.microsoft.com/en-us/azure/devops/pipelines/library/service-endpoints?view=azure-devops) that you must configure.

To automate the release of updates to existing iOS TestFlight beta apps or production apps in the App Store, add the [App Store Release](https://marketplace.visualstudio.com/items?itemName=ms-vsclient.app-store#:%7E:text=the%20App%20Store.-,App%20Store%20Release) task.

There are limitations of using this task with [Apple two-factor authentication](https://marketplace.visualstudio.com/items?itemName=ms-vsclient.app-store#:%7E:text=or%20release%20pipeline.-,Two%2DFactor%20Authentication). Apple authentication is region-specific, and fastlane session tokens expire quickly and must be recreated and reconfigured.

Copy

```lang-yaml
- task: AppStoreRelease@1
  displayName: 'Publish to the App Store TestFlight track'
  inputs:
    serviceEndpoint: 'My Apple App Store service connection'
    appIdentifier: com.yourorganization.testapplication.etc
    ipaPath: '$(build.artifactstagingdirectory)/**/*.ipa'
    shouldSkipWaitingForProcessing: true
    shouldSkipSubmission: true

```

To automate the promotion of a previously submitted app from iTunes Connect to the App Store, add the [App Store Promote](https://marketplace.visualstudio.com/items?itemName=ms-vsclient.app-store#:%7E:text=true%0A%20%20%20%20appSpecificId%3A%20%271234567890%27-,App%20Store%20Promote) task.

Copy

```lang-yaml
- task: AppStorePromote@1
  displayName: 'Submit to the App Store for review'
  inputs:
    serviceEndpoint: 'My Apple App Store service connection'
    appIdentifier: com.yourorganization.testapplication.etc
    shouldAutoRelease: false

```

[Section titled: Related extensions](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode?view=azure-devops#related-extensions)

## Related extensions

- [Apple App Store](https://marketplace.visualstudio.com/items?itemName=ms-vsclient.app-store) from Microsoft
- [Codified Security](https://marketplace.visualstudio.com/items?itemName=codifiedsecurity.CodifiedSecurity) from Codified Security
- [MacinCloud](https://marketplace.visualstudio.com/items?itemName=moboware.macincloud) from Moboware Inc.
- [Mobile App Tasks for iOS and Android](https://marketplace.visualstudio.com/items?itemName=vs-publisher-473885.motz-mobile-buildtasks) from James Montemagno
- [Mobile Testing Lab](https://marketplace.visualstudio.com/items?itemName=Perfecto.PerfectoCQ) from Perfecto Mobile
- [Raygun](https://marketplace.visualstudio.com/items?itemName=Raygun.vsts-extension) from Raygun
- [React Native](https://marketplace.visualstudio.com/items?itemName=ms-vsclient.react-native-extension) from Microsoft
- [Version Setter](https://marketplace.visualstudio.com/items?itemName=tomgilder.version-setter) from Tom Gilder

* * *

## Feedback

Was this page helpful?


YesNo

* * *

## Additional resources

Training


Learning path


[Build applications with Azure DevOps learning path - Training](https://learn.microsoft.com/en-us/training/paths/build-applications-with-azure-devops/?source=recommendations)

In this learning path, find out how to collaborate with others to continuously build, test, and verify your applications using Azure Pipelines and GitHub.


Certification


[Microsoft Certified: Azure Developer Associate - Certifications](https://learn.microsoft.com/en-us/credentials/certifications/azure-developer/?source=recommendations)

Build end-to-end solutions in Microsoft Azure to create Azure Functions, implement and manage web apps, develop solutions utilizing Azure storage, and more.


Please sign in to use this experience.

[Sign in](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/xcode?view=azure-devops#)

---


## 7. Define variables {#section-7}

*Source: [https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables)*

Table of contents Exit focus mode

Ask LearnAsk Learn

Table of contents[Read in English](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch)Add to CollectionsAdd to plan[Edit](https://github.com/MicrosoftDocs/azure-devops-docs/blob/main/docs/pipelines/process/variables.md)

* * *

#### Share via

[Facebook](https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Fvariables%3Fview%3Dazure-devops%26tabs%3Dyaml%252Cbatch%26WT.mc_id%3Dfacebook) [x.com](https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Fvariables%3Fview%3Dazure-devops%26tabs%3Dyaml%252Cbatch%26WT.mc_id%3Dtwitter&text=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Fvariables%3Fview%3Dazure-devops%26tabs%3Dyaml%252Cbatch%26WT.mc_id%3Dtwitter&tw_p=tweetbutton&url=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Fvariables%3Fview%3Dazure-devops%26tabs%3Dyaml%252Cbatch%26WT.mc_id%3Dtwitter) [LinkedIn](https://www.linkedin.com/feed/?shareActive=true&text=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Fvariables%3Fview%3Dazure-devops%26tabs%3Dyaml%252Cbatch%26WT.mc_id%3Dlinkedin) [Email](mailto:?subject=%5BShared%20Article%5D%20Define%20variables%20-%20Azure%20Pipelines%20%7C%20Microsoft%20Learn&body=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fprocess%2Fvariables%3Fview%3Dazure-devops%26tabs%3Dyaml%252Cbatch%26WT.mc_id%3Demail)

* * *

Print

* * *

Note

Access to this page requires authorization. You can try [signing in](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#) or changing directories.


Access to this page requires authorization. You can try changing directories.


# Define variables

- 02/26/2025

Feedback

**Azure DevOps Services \| Azure DevOps Server 2022 - Azure DevOps Server 2019**

Variables give you a convenient way to get key bits of data into various parts of the pipeline. The most common use of variables is to define a value that you can then use in your pipeline. All variables are strings and are mutable. The value of a variable can change from run to run or job to job of your pipeline.

When you define the same variable in multiple places with the same name, the most locally scoped variable takes precedence. So, a variable defined at the job level can override a variable set at the stage level. A variable defined at the stage level overrides a variable set at the pipeline root level. A variable set in the pipeline root level overrides a variable set in the Pipeline settings UI.
To learn more how to work with variables defined at the job, stage, and root level, see [Variable scope](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#variable-scopes).

You can use variables with [expressions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/expressions?view=azure-devops) to conditionally assign values and further customize pipelines.

Variables are different from [runtime parameters](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/runtime-parameters?view=azure-devops). Runtime parameters are typed and available during template parsing.

[Section titled: User-defined variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#user-defined-variables)

## User-defined variables

When you define a variable, you can use [different syntaxes (macro, template expression, or runtime)](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#understand-variable-syntax) and what syntax you use determines where in the pipeline your variable renders.

In YAML pipelines, you can set variables at the root, stage, and job level. You can also specify variables outside of a YAML pipeline in the UI. When you set a variable in the UI, that variable can be encrypted and set as secret.

User-defined variables can be [set as read-only](https://learn.microsoft.com/en-us/azure/devops/pipelines/security/inputs?view=azure-devops). There are [naming restrictions for variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#variable-naming-restrictions) (example: you can't use `secret` at the start of a variable name).

You can [use a variable group](https://learn.microsoft.com/en-us/azure/devops/pipelines/library/variable-groups?view=azure-devops) to make variables available across multiple pipelines.

Use [templates](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/templates?view=azure-devops) to define variables in one file that are used in multiple pipelines.

[Section titled: User-defined multi-line variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#user-defined-multi-line-variables)

### User-defined multi-line variables

Azure DevOps supports multi-line variables but there are a few limitations.

Downstream components such as pipeline tasks might not handle the variable values correctly.

Azure DevOps won't alter user-defined variable values. Variable values need to be formatted correctly before being passed as multi-line variables. When formatting your variable, avoid special characters, don't use restricted names, and make sure you use a line ending format that works for the operating system of your agent.

Multi-line variables behave differently depending on the operating system. To avoid this, make sure that you format multi-line variables correctly for the target operating system.

Azure DevOps never alters variable values, even if you provide unsupported formatting.

[Section titled: System variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#system-variables)

## System variables

In addition to user-defined variables, Azure Pipelines has system variables with predefined values. For example, the predefined variable [Build.BuildId](https://learn.microsoft.com/en-us/azure/devops/pipelines/build/variables?view=azure-devops#build-variables-devops-services) gives the ID of each build and can be used to identify different pipeline runs. You can use the `Build.BuildId` variable in scripts or tasks when you need to a unique value.

If you're using YAML or classic build pipelines, see [predefined variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/build/variables?view=azure-devops) for a comprehensive list of system variables.

If you're using classic release pipelines, see [release variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/release/variables?view=azure-devops).

System variables get set with their current value when you run the pipeline. Some variables are set automatically. As a pipeline author or end user, you change the value of a system variable before the pipeline runs.

System variables are read-only.

[Section titled: Environment variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#environment-variables)

## Environment variables

Environment variables are specific to the operating system you're using. They're injected into a pipeline in platform-specific ways. The format corresponds to how environment variables get formatted for your specific scripting platform.

On UNIX systems (macOS and Linux), environment variables have the format `$NAME`. On Windows, the format is `%NAME%` for batch and `$env:NAME` in PowerShell.

System and user-defined variables (except secret variables) also get injected as environment variables for your platform. When variables convert into environment variables, variable names become uppercase, and periods turn into underscores. For example, the variable name `any.variable` becomes the variable name `$ANY_VARIABLE`.

There are [variable naming restrictions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#variable-naming-restrictions) for environment variables (example: you can't use `secret` at the start of a variable name).

[Section titled: Variable naming restrictions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#variable-naming-restrictions)

## Variable naming restrictions

User-defined and environment variables can consist of letters, numbers, `.`, and `_` characters. Don't use variable prefixes reserved by the system. These are: `endpoint`, `input`, `secret`, `path`, and `securefile`. Any variable that begins with one of these strings (regardless of capitalization) won't be available to your tasks and scripts.

[Section titled: Understand variable syntax](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#understand-variable-syntax)

## Understand variable syntax

Azure Pipelines supports three different ways to reference variables: macro, template expression, and runtime expression. You can use each syntax for a different purpose and each have some limitations.

In a pipeline, template expression variables ( `${{ variables.var }}`) get processed at compile time, before runtime starts. Macro syntax variables ( `$(var)`) get processed during runtime before a task runs. Runtime expressions ( `$[variables.var]`) also get processed during runtime but are intended to be used with [conditions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/conditions?view=azure-devops) and [expressions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/expressions?view=azure-devops). When you use a runtime expression, it must take up the entire right side of a definition.

In this example, you can see that the template expression still has the initial value of the variable after the variable is updated. The value of the macro syntax variable updates. The template expression value doesn't change because all template expression variables get processed at compile time before tasks run. In contrast, macro syntax variables evaluate before each task runs.

Copy

```lang-yaml
variables:
- name: one
  value: initialValue

steps:
  - script: |
      echo ${{ variables.one }} # outputs initialValue
      echo $(one)
    displayName: First variable pass
  - bash: echo "##vso[task.setvariable variable=one]secondValue"
    displayName: Set new variable value
  - script: |
      echo ${{ variables.one }} # outputs initialValue
      echo $(one) # outputs secondValue
    displayName: Second variable pass

```

[Section titled: Macro syntax variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#macro-syntax-variables)

### Macro syntax variables

Most documentation examples use macro syntax ( `$(var)`). Macro syntax is designed to interpolate variable values into task inputs and into other variables.

Variables with macro syntax get processed before a task executes during runtime. Runtime happens [after template expansion](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/runs?view=azure-devops#process-the-pipeline). When the system encounters a macro expression, it replaces the expression with the contents of the variable. If there's no variable by that name, then the macro expression doesn't change. For example, if `$(var)` can't be replaced, `$(var)` won't be replaced by anything.

Macro syntax variables remain unchanged with no value because an empty value like `$()` might mean something to the task you're running and the agent shouldn't assume you want that value replaced. For example, if you use `$(foo)` to reference variable `foo` in a Bash task, replacing all `$()` expressions in the input to the task could break your Bash scripts.

Macro variables are only expanded when they're used for a value, not as a keyword. Values appear on the right side of a pipeline definition. The following is valid: `key: $(value)`. The following isn't valid: `$(key): value`. Macro variables aren't expanded when used to display a job name inline. Instead, you must use the `displayName` property.

Note

Macro syntax variables are only expanded for `stages`, `jobs`, and `steps`.
You cannot, for example, use macro syntax inside a `resource` or `trigger`.

This example uses macro syntax with Bash, PowerShell, and a script task. The syntax for calling a variable with macro syntax is the same for all three.

Copy

```lang-yaml
variables:
 - name: projectName
   value: contoso

steps:
- bash: echo $(projectName)
- powershell: echo $(projectName)
- script: echo $(projectName)

```

[Section titled: Template expression syntax](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#template-expression-syntax)

### Template expression syntax

You can use template expression syntax to expand both [template parameters](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/template-parameters?view=azure-devops) and variables ( `${{ variables.var }}`). Template variables process at compile time, and get replaced before runtime starts. Template expressions are designed for reusing parts of YAML as templates.

Template variables silently coalesce to empty strings when a replacement value isn't found. Template expressions, unlike macro and runtime expressions, can appear as either keys (left side) or values (right side). The following is valid: `${{ variables.key }} : ${{ variables.value }}`.

[Section titled: Runtime expression syntax](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#runtime-expression-syntax)

### Runtime expression syntax

You can use runtime expression syntax for variables that are expanded at runtime ( `$[variables.var]`). Runtime expression variables silently coalesce to empty strings when a replacement value isn't found. Use runtime expressions in job conditions, to support conditional execution of jobs, or whole stages.

Runtime expression variables are only expanded when they're used for a value, not as a keyword. Values appear on the right side of a pipeline definition. The following is valid: `key: $[variables.value]`. The following isn't valid: `$[variables.key]: value`. The runtime expression must take up the entire right side of a key-value pair. For example, `key: $[variables.value]` is valid but `key: $[variables.value] foo` isn't.

Expand table

| Syntax | Example | When is it processed? | Where does it expand in a pipeline definition? | How does it render when not found? |
| --- | --- | --- | --- | --- |
| macro | `$(var)` | runtime before a task executes | value (right side) | prints `$(var)` |
| template expression | `${{ variables.var }}` | compile time | key or value (left or right side) | empty string |
| runtime expression | `$[variables.var]` | runtime | value (right side) | empty string |

[Section titled: What syntax should I use?](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#what-syntax-should-i-use)

### What syntax should I use?

Use macro syntax if you're providing a secure string or a [predefined variable](https://learn.microsoft.com/en-us/azure/devops/pipelines/build/variables) input for a task.

Choose a runtime expression if you're working with [conditions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/conditions?view=azure-devops) and [expressions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/expressions?view=azure-devops). However, don't use a runtime expression if you don't want your empty variable to print (example: `$[variables.var]`). For example, if you have conditional logic that relies on a variable having a specific value or no value. In that case, you should use a macro expression.

Typically a template variable is the standard to use. By leveraging template variables, your pipeline will fully inject the variable value into your pipeline at pipeline compilation. This is helpful when attempting to debug pipelines. You can download the log files and evaluate the fully expanded value that is being substituted in. Since the variable is substituted in, you shouldn't leverage template syntax for sensitive values.

[Section titled: Set variables in pipeline](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#set-variables-in-pipeline)

## Set variables in pipeline

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_1_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_1_classic)
- [Azure DevOps CLI](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_1_azure-devops-cli)

In the most common case, you set the variables and use them within the YAML file. This allows you to track changes to the variable in your version control system. You can also define variables in the pipeline settings UI (see the Classic tab) and reference them in your YAML.

Here's an example that shows how to set two variables, `configuration` and `platform`, and use them later in steps. To use a variable in a YAML statement, wrap it in `$()`. Variables can't be used to define a `repository` in a YAML statement.

Copy

```lang-yaml
# Set variables once
variables:
  configuration: debug
  platform: x64

steps:

# Use them once
- task: MSBuild@1
  inputs:
    solution: solution1.sln
    configuration: $(configuration) # Use the variable
    platform: $(platform)

# Use them again
- task: MSBuild@1
  inputs:
    solution: solution2.sln
    configuration: $(configuration) # Use the variable
    platform: $(platform)

```

[Section titled: Variable scopes](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#variable-scopes)

### Variable scopes

In the YAML file, you can set a variable at various scopes:

- At the root level, to make it available to all jobs in the pipeline.
- At the stage level, to make it available only to a specific stage.
- At the job level, to make it available only to a specific job.

When you define a variable at the top of a YAML, the variable is available to all jobs and stages in the pipeline and is a global variable. Global variables defined in a YAML aren't visible in the pipeline settings UI.

Variables at the job level override variables at the root and stage level. Variables at the stage level override variables at the root level.

Copy

```lang-yaml
variables:
  global_variable: value    # this is available to all jobs

jobs:
- job: job1
  pool:
    vmImage: 'ubuntu-latest'
  variables:
    job_variable1: value1    # this is only available in job1
  steps:
  - bash: echo $(global_variable)
  - bash: echo $(job_variable1)
  - bash: echo $JOB_VARIABLE1 # variables are available in the script environment too

- job: job2
  pool:
    vmImage: 'ubuntu-latest'
  variables:
    job_variable2: value2    # this is only available in job2
  steps:
  - bash: echo $(global_variable)
  - bash: echo $(job_variable2)
  - bash: echo $GLOBAL_VARIABLE

```

The output from both jobs looks like this:

Copy

```lang-text
# job1
value
value1
value1

# job2
value
value2
value

```

[Section titled: Specify variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#specify-variables)

### Specify variables

In the preceding examples, the `variables` keyword is followed by a list of key-value pairs.
The keys are the variable names and the values are the variable values.

There's another syntax, useful when you want to use [templates](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/templates?view=azure-devops) for variables or [variable groups](https://learn.microsoft.com/en-us/azure/devops/pipelines/library/variable-groups?view=azure-devops).

With [templates](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/templates?view=azure-devops#variable-reuse), variables can be defined in one YAML and included in another YAML file.

Variable groups are a set of variables that you can use across multiple pipelines. They allow you to manage and organize variables that are common to various stages in one place.

Use this syntax for variable templates and variable groups at the root level of a pipeline.

In this alternate syntax, the `variables` keyword takes a list of variable specifiers.
The variable specifiers are `name` for a regular variable, `group` for a variable group, and `template` to include a variable template.
The following example demonstrates all three.

Copy

```lang-yaml
variables:
# a regular variable
- name: myvariable
  value: myvalue
# a variable group
- group: myvariablegroup
# a reference to a variable template
- template: myvariabletemplate.yml

```

Learn more about [variable reuse with templates](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/templates?view=azure-devops).

[Section titled: Access variables through the environment](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#access-variables-through-the-environment)

### Access variables through the environment

Notice that variables are also made available to scripts through environment variables. The syntax for using these environment variables depends on the scripting language.

The name is upper-cased, and the `.` is replaced with the `_`. This is automatically inserted into the process environment. Here are some examples:

- Batch script: `%VARIABLE_NAME%`
- PowerShell script: `$env:VARIABLE_NAME`
- Bash script: `$VARIABLE_NAME`

Important

Predefined variables that contain file paths are translated to the appropriate styling (Windows style C:\\foo\ versus Unix style /foo/) based on agent host type and shell type. If you are running bash script tasks on Windows, you should use the environment variable method for accessing these variables rather than the pipeline variable method to ensure you have the correct file path styling.

You can set a variable for a build pipeline by following these steps:

1. Go to the **Pipelines** page, select the appropriate pipeline, and then select **Edit**.
2. Locate the **Variables** for this pipeline.
3. Add or update the variable.
4. To mark the variable as secret, select **Keep this value secret**.
5. Save the pipeline.

After setting the variable, you can use it as an input to a task or within the scripts in your pipeline.
To use a variable as an input to a task, wrap it in `$()`.

Notice that variables are also made available to scripts through environment variables. The syntax for using these environment variables depends on the scripting language.

The name is upper-cased, and the `.` is replaced with the `_`. This is automatically inserted into the process environment. Here are some examples:

- Batch script: `%VARIABLE_NAME%`
- PowerShell script: `$env:VARIABLE_NAME`
- Bash script: `$VARIABLE_NAME`

Important

Predefined variables that contain file paths are translated to the appropriate styling (Windows style C:\\foo\ versus Unix style /foo/) based on agent host type and shell type. If you are running bash script tasks on Windows, you should use the environment variable method for accessing these variables rather than the pipeline variable method to ensure you have the correct file path styling.

Using the Azure DevOps CLI, you can create and update variables for the pipeline runs in your project. You can also delete the variables if you no longer need them.

[Create a variable](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#create-variable) \| [Update a variable](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#update-variable) \| [Delete a variable](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#delete-variable)

[Section titled: Prerequisites](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#prerequisites)

### Prerequisites

- You've installed the Azure DevOps CLI extension as described in [Get started with Azure DevOps CLI](https://learn.microsoft.com/en-us/azure/devops/cli/?view=azure-devops).
- Sign into Azure DevOps using `az login`.
- For the examples in this article, set the default organization using `az devops configure --defaults organization=YourOrganizationURL`.

[Section titled: Create a variable](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#create-a-variable)

### Create a variable

You can create variables in your pipeline with the [az pipelines variable create](https://learn.microsoft.com/en-us/cli/azure/pipelines/variable#az-pipelines-variable-create) command. To get started, see [Get started with Azure DevOps CLI](https://learn.microsoft.com/en-us/azure/devops/cli/?view=azure-devops).

Copy

```lang-azurecli
az pipelines variable create --name
                             [--allow-override {false, true}]
                             [--org]
                             [--pipeline-id]
                             [--pipeline-name]
                             [--project]
                             [--secret {false, true}]
                             [--value]

```

[Section titled: Parameters](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#parameters)

#### Parameters

- **name**: Required. Name of the variable.
- **allow-override**: Optional. Indicates whether the value can be set at queue time. Accepted values are _false_ and _true_.
- **org**: Azure DevOps organization URL. You can configure the default organization using `az devops configure -d organization=ORG_URL`. Required if not configured as default or picked up using `git config`. Example: `--org https://dev.azure.com/MyOrganizationName/`.
- **pipeline-id**: Required if **pipeline-name** isn't supplied. ID of the pipeline.
- **pipeline-name**: Required if **pipeline-id** isn't supplied, but ignored if **pipeline-id** is supplied. Name of the pipeline.
- **project**: Name or ID of the project. You can configure the default project using `az devops configure -d project=NAME_OR_ID`. Required if not configured as default or picked up using `git config`.
- **secret**: Optional. Indicates whether the variable's value is a secret. Accepted values are _false_ and _true_.
- **value**: Required for non-secret variable. Value of the variable. For secret variables, if **value** parameter isn't provided, it's picked from environment variable prefixed with `AZURE_DEVOPS_EXT_PIPELINE_VAR_` or user is prompted to enter it via standard input. For example, a variable named **MySecret** can be input using the environment variable `AZURE_DEVOPS_EXT_PIPELINE_VAR_MySecret`.

[Section titled: Example](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#example)

#### Example

The following command creates a variable in **MyFirstProject** named **Configuration** with the value **platform** in the pipeline with ID **12**. It shows the result in table format.

Copy

```lang-azurecli
az pipelines variable create --name Configuration --pipeline-id 12 --value platform --project MyFirstProject --output table

Name        Allow Override    Is Secret    Value
----------  ----------------  -----------  --------
Configuration  False             False        platform

```

[Section titled: Update a variable](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#update-a-variable)

### Update a variable

You can update variables in your pipeline with the [az pipelines variable update](https://learn.microsoft.com/en-us/cli/azure/pipelines/variable#az-pipelines-variable-update) command. To get started, see [Get started with Azure DevOps CLI](https://learn.microsoft.com/en-us/azure/devops/cli/?view=azure-devops).

Copy

```lang-azurecli
az pipelines variable update --name
                             [--allow-override {false, true}]
                             [--new-name]
                             [--org]
                             [--pipeline-id]
                             [--pipeline-name]
                             [--project]
                             [--prompt-value {false, true}]
                             [--secret {false, true}]
                             [--value]

```

[Section titled: Parameters](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#parameters-1)

#### Parameters

- **name**: Required. Original name of the variable.
- **allow-override**: Optional. Indicates whether the value can be set at queue time. Accepted values are _false_ and _true_.
- **new-name**: Optional. Specify to change the name of the variable.
- **org**: Azure DevOps organization URL. You can configure the default organization using `az devops configure -d organization=ORG_URL`. Required if not configured as default or picked up using `git config`. Example: `--org https://dev.azure.com/MyOrganizationName/`.
- **pipeline-id**: Required if **pipeline-name** isn't supplied. ID of the pipeline.
- **pipeline-name**: Required if **pipeline-id** isn't supplied, but ignored if **pipeline-id** is supplied. Name of the pipeline.
- **project**: Name or ID of the project. You can configure the default project using `az devops configure -d project=NAME_OR_ID`. Required if not configured as default or picked up using `git config`.
- **prompt-value**: Set to **true** to update the value of a secret variable using environment variable or prompt via standard input. Accepted values are _false_ and _true_.
- **secret**: Indicates whether the variable's value is a secret. Accepted values are _false_ and _true_.
- **value**: Updates the value of the variable. For secret variables, use the **prompt-value** parameter to be prompted to enter it via standard input. For non-interactive consoles, it can be picked from environment variable prefixed with `AZURE_DEVOPS_EXT_PIPELINE_VAR_`. For example, a variable named **MySecret** can be input using the environment variable `AZURE_DEVOPS_EXT_PIPELINE_VAR_MySecret`.

[Section titled: Example](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#example-1)

#### Example

The following command updates the **Configuration** variable with the new value **config.debug** in the pipeline with ID **12**. It specifies that the variable isn't a **secret** and shows the result in table format.

Copy

```lang-azurecli
az pipelines variable update --name Configuration --pipeline-id 12 --secret false --value config.debug --output table

Name           Allow Override    Is Secret    Value
-------------  ----------------  -----------  ------------
Configuration  False             False        config.debug

```

[Section titled: Delete a variable](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#delete-a-variable)

### Delete a variable

You can delete variables in your pipeline with the [az pipelines variable delete](https://learn.microsoft.com/en-us/cli/azure/pipelines/variable#az-pipelines-variable-delete) command. To get started, see [Get started with Azure DevOps CLI](https://learn.microsoft.com/en-us/azure/devops/cli/?view=azure-devops).

Copy

```lang-azurecli
az pipelines variable delete --name
                             [--org]
                             [--pipeline-id]
                             [--pipeline-name]
                             [--project]
                             [--yes]

```

[Section titled: Parameters](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#parameters-2)

#### Parameters

- **name**: Required. Name of the variable you want to delete.
- **org**: Azure DevOps organization URL. You can configure the default organization using `az devops configure -d organization=ORG_URL`. Required if not configured as default or picked up using `git config`. Example: `--org https://dev.azure.com/MyOrganizationName/`.
- **pipeline-id**: Required if **pipeline-name** isn't supplied. ID of the pipeline.
- **pipeline-name**: Required if **pipeline-id** isn't supplied, but ignored if **pipeline-id** is supplied. Name of the pipeline.
- **project**: Name or ID of the project. You can configure the default project using `az devops configure -d project=NAME_OR_ID`. Required if not configured as default or picked up using `git config`.
- **yes**: Optional. Doesn't prompt for confirmation.

[Section titled: Example](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#example-2)

#### Example

The following command deletes the **Configuration** variable from the pipeline with ID **12** and doesn't prompt for confirmation.

Copy

```lang-azurecli
az pipelines variable delete --name Configuration --pipeline-id 12 --yes

Deleted variable 'Configuration' successfully.

```

Azure DevOps CLI commands aren't supported for Azure DevOps Server.

[Section titled: Set secret variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#secret-variables)

## Set secret variables

Tip

Secret variables aren't automatically exported as environment variables. To use secret variables in your scripts, explicitly map them to environment variables. For more information, see [Set secret variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/set-secret-variables?view=azure-devops).

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_2_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_2_classic)
- [Azure DevOps CLI](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_2_azure-devops-cli)

Don't set secret variables in your YAML file. Operating systems often log commands for the processes that they run, and you wouldn't want the log to include a secret that you passed in as an input. Use the script's environment or map the variable within the `variables` block to pass secrets to your pipeline.

Note

Azure Pipelines makes an effort to mask secrets when emitting data to pipeline logs, so you may see additional variables and data masked in output and logs that are not set as secrets.

You need to set secret variables in the pipeline settings UI for your pipeline. These variables are scoped to the pipeline where they're set. You can also set [secret variables in variable groups](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#reference-secret-variables-in-variable-groups).

To set secrets in the web interface, follow these steps:

1. Go to the **Pipelines** page, select the appropriate pipeline, and then select **Edit**.
2. Locate the **Variables** for this pipeline.
3. Add or update the variable.
4. Select the option to **Keep this value secret** to store the variable in an encrypted manner.
5. Save the pipeline.

Secret variables are encrypted at rest with a 2048-bit RSA key.
Secrets are available on the agent for tasks and scripts to use. Be careful about who has access to alter your pipeline.

Important

We make an effort to mask secrets from appearing in Azure Pipelines output, but you still need to take precautions. Never echo secrets as output.
Some operating systems log command line arguments. Never pass secrets on the command line.
Instead, we suggest that you map your secrets into environment variables.

We never mask substrings of secrets. If, for example, "abc123" is set as a secret, "abc" isn't masked from the logs.
This is to avoid masking secrets at too granular of a level, making the logs unreadable.
For this reason, secrets should not contain structured data. If, for example, "{ "foo": "bar" }" is set as a secret,
"bar" isn't masked from the logs.

Unlike a normal variable, they are not automatically decrypted into environment variables for scripts. You need to explicitly map secret variables.

The following example shows how to map and use a secret variable called `mySecret` in PowerShell and Bash scripts. Two global variables are defined. `GLOBAL_MYSECRET` is assigned the value of a secret variable `mySecret`, and `GLOBAL_MY_MAPPED_ENV_VAR` is assigned the value of a non-secret variable `nonSecretVariable`. Unlike a normal pipeline variable, there's no environment variable called `MYSECRET`.

The PowerShell task runs a script to print the variables.

- `$(mySecret)`: This is a direct reference to the secret variable and works.
- `$env:MYSECRET`: This attempts to access the secret variable as an environment variable, which does not work because secret variables are not automatically mapped to environment variables.
- `$env:GLOBAL_MYSECRET`: This attempts to access the secret variable through a global variable, which also does not work because secret variables cannot be mapped this way.
- `$env:GLOBAL_MY_MAPPED_ENV_VAR`: This accesses the non-secret variable through a global variable, which works.
- `$env:MY_MAPPED_ENV_VAR`: This accesses the secret variable through a task-specific environment variable, which is the recommended way to map secret variables to environment variables.

Copy

```lang-yaml
variables:
 GLOBAL_MYSECRET: $(mySecret) # this will not work because the secret variable needs to be mapped as env
 GLOBAL_MY_MAPPED_ENV_VAR: $(nonSecretVariable) # this works because it's not a secret.

steps:

- powershell: |
    Write-Host "Using an input-macro works: $(mySecret)"
    Write-Host "Using the env var directly does not work: $env:MYSECRET"
    Write-Host "Using a global secret var mapped in the pipeline does not work either: $env:GLOBAL_MYSECRET"
    Write-Host "Using a global non-secret var mapped in the pipeline works: $env:GLOBAL_MY_MAPPED_ENV_VAR"
    Write-Host "Using the mapped env var for this task works and is recommended: $env:MY_MAPPED_ENV_VAR"
  env:
    MY_MAPPED_ENV_VAR: $(mySecret) # the recommended way to map to an env variable

- bash: |
    echo "Using an input-macro works: $(mySecret)"
    echo "Using the env var directly does not work: $MYSECRET"
    echo "Using a global secret var mapped in the pipeline does not work either: $GLOBAL_MYSECRET"
    echo "Using a global non-secret var mapped in the pipeline works: $GLOBAL_MY_MAPPED_ENV_VAR"
    echo "Using the mapped env var for this task works and is recommended: $MY_MAPPED_ENV_VAR"
  env:
    MY_MAPPED_ENV_VAR: $(mySecret) # the recommended way to map to an env variable

```

The output from both tasks in the preceding script would look like this:

Copy

```lang-text
Using an input-macro works: ***
Using the env var directly does not work:
Using a global secret var mapped in the pipeline does not work either:
Using a global non-secret var mapped in the pipeline works: foo
Using the mapped env var for this task works and is recommended: ***

```

You can also use secret variables outside of scripts. For example, you can map secret variables to tasks using the `variables` definition. This example shows how to use secret variables `$(vmsUser)` and `$(vmsAdminPass)` in an Azure file copy task.

Copy

```lang-yaml
variables:
  VMS_USER: $(vmsUser)
  VMS_PASS: $(vmsAdminPass)

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: AzureFileCopy@6
  inputs:
    SourcePath: 'my/path' # Specify the source path
    azureSubscription: 'my-subscription' # Azure subscription name
    Destination: 'AzureVMs' # Destination type
    storage: 'my-storage' # Azure storage account name
    resourceGroup: 'my-resource-group' # Resource group name
    vmsAdminUserName: $(VMS_USER) # Admin username for the VM
    vmsAdminPassword: $(VMS_PASS) # Admin password for the VM
    CleanTargetBeforeCopy: false # Do not clean the target before copying

```

[Section titled: Reference secret variables in variable groups](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#reference-secret-variables-in-variable-groups)

### Reference secret variables in variable groups

This example shows how to reference a variable group in your YAML file, and also how to add variables within the YAML. There are two variables used from the variable group: `user` and `token`. The `token` variable is secret, and is mapped to the environment variable `$env:MY_MAPPED_TOKEN` so that it can be referenced in the YAML.

This YAML makes a REST call to retrieve a list of releases, and outputs the result.

Copy

```lang-yaml
variables:
- group: 'my-var-group' # variable group
- name: 'devopsAccount' # new variable defined in YAML
  value: 'contoso'
- name: 'projectName' # new variable defined in YAML
  value: 'contosoads'

steps:
- task: PowerShell@2
  inputs:
    targetType: 'inline'
    script: |
        # Encode the Personal Access Token (PAT)
        # $env:USER is a normal variable in the variable group
        # $env:MY_MAPPED_TOKEN is a mapped secret variable
        $base64AuthInfo = [Convert]::ToBase64String([Text.Encoding]::ASCII.GetBytes(("{0}:{1}" -f $env:USER,$env:MY_MAPPED_TOKEN)))

        # Get a list of releases
        $uri = "https://vsrm.dev.azure.com/$(devopsAccount)/$(projectName)/_apis/release/releases?api-version=5.1"

        # Invoke the REST call
        $result = Invoke-RestMethod -Uri $uri -Method Get -ContentType "application/json" -Headers @{Authorization=("Basic {0}" -f $base64AuthInfo)}

        # Output releases in JSON
        Write-Host $result.value
  env:
    MY_MAPPED_TOKEN: $(token) # Maps the secret variable $(token) from my-var-group

```

Important

By default with GitHub repositories, secret variables associated with your pipeline aren't made available to pull request builds of forks. For more information, see [Contributions from forks](https://learn.microsoft.com/en-us/azure/devops/pipelines/repos/github?view=azure-devops#contributions-from-forks).

To set secrets in the web interface, follow these steps:

1. Go to the **Pipelines** page, select the appropriate pipeline, and then select **Edit**.
2. Locate the **Variables** for this pipeline.
3. Add or update the variable.
4. Select the option to **Keep this value secret** to store the variable in an encrypted manner.
5. Save the pipeline.

Secret variables are encrypted at rest with a 2048-bit RSA key.
Secrets are available on the agent for tasks and scripts to use. Be careful about who has access to alter your pipeline.

Important

We make an effort to mask secrets from appearing in Azure Pipelines output, but you still need to take precautions. Never echo secrets as output.
Some operating systems log command line arguments. Never pass secrets on the command line.
Instead, we suggest that you map your secrets into environment variables.

We never mask substrings of secrets. If, for example, "abc123" is set as a secret, "abc" isn't masked from the logs.
This is to avoid masking secrets at too granular of a level, making the logs unreadable.
For this reason, secrets should not contain structured data. If, for example, "{ "foo": "bar" }" is set as a secret,
"bar" isn't masked from the logs.

Unlike a normal variable, they are not automatically decrypted into environment variables for scripts. You need to explicitly map secret variables.

Each task that needs to use the secret as an environment variable does remapping. If you want to use a secret variable called `mySecret` from a script, use the `Environment` section of the scripting task's input variables. Set the environment variable name to `MYSECRET`, and set the value to `$(mySecret)`.

Important

By default with GitHub repositories, secret variables associated with your pipeline aren't made available to pull request builds of forks. For more information, see [Contributions from forks](https://learn.microsoft.com/en-us/azure/devops/pipelines/repos/github?view=azure-devops#contributions-from-forks).

To set secret variables using the Azure DevOps CLI, see [Create a variable](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#create-variable) or [Update a variable](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#update-variable).

Azure DevOps CLI commands aren't supported for Azure DevOps Server.

[Section titled: Share variables across pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#share-variables-across-pipelines)

## Share variables across pipelines

To share variables across multiple pipelines in your project, use the web interface. Under **Library**, use [variable groups](https://learn.microsoft.com/en-us/azure/devops/pipelines/library/variable-groups?view=azure-devops).

[Section titled: Use output variables from tasks](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#use-output-variables-from-tasks)

## Use output variables from tasks

Some tasks define output variables, which you can consume in downstream steps, jobs, and stages.
In YAML, you can access variables across jobs and stages by using [dependencies](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/expressions?view=azure-devops#dependencies).

When referencing matrix jobs in downstream tasks, you'll need to use a different syntax. See [Set a multi-job output variable](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#set-a-multi-job-output-variable). You also need to use a different syntax for variables in deployment jobs. See [Support for output variables in deployment jobs](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/deployment-jobs?view=azure-devops#support-for-output-variables).

- To reference a variable from a different task within the same job, use `TASK.VARIABLE`.
- To reference a variable from a task from a different job, use `dependencies.JOB.outputs['TASK.VARIABLE']`.

Note

By default, each stage in a pipeline depends on the one just before it in the YAML file. If you need to refer to a stage that isn't immediately prior to the current one, you can override this automatic default by adding a `dependsOn` section to the stage.

Note

The following examples use standard pipeline syntax. If you're using deployment pipelines, both variable and conditional variable syntax will differ. For information about the specific syntax to use, see [Deployment jobs](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/deployment-jobs?view=azure-devops).

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_3_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_3_classic)
- [Azure DevOps CLI](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_3_azure-devops-cli)

For these examples, assume we have a task called `MyTask`, which sets an output variable called `MyVar`.
Learn more about the syntax in [Expressions - Dependencies](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/expressions?view=azure-devops#dependencies).

[Section titled: Use outputs in the same job](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#use-outputs-in-the-same-job)

### Use outputs in the same job

Copy

```lang-yaml
steps:
- task: MyTask@1  # this step generates the output variable
  name: ProduceVar  # because we're going to depend on it, we need to name the step
- script: echo $(ProduceVar.MyVar) # this step uses the output variable

```

[Section titled: Use outputs in a different job](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#use-outputs-in-a-different-job)

### Use outputs in a different job

Copy

```lang-yaml
jobs:
- job: A
  steps:
  # assume that MyTask generates an output variable called "MyVar"
  # (you would learn that from the task's documentation)
  - task: MyTask@1
    name: ProduceVar  # because we're going to depend on it, we need to name the step
- job: B
  dependsOn: A
  variables:
    # map the output variable from A into this job
    varFromA: $[ dependencies.A.outputs['ProduceVar.MyVar'] ]
  steps:
  - script: echo $(varFromA) # this step uses the mapped-in variable

```

[Section titled: Use outputs in a different stage](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#use-outputs-in-a-different-stage)

### Use outputs in a different stage

To use the output from a different stage, the format for referencing variables is `stageDependencies.STAGE.JOB.outputs['TASK.VARIABLE']`. At the stage level, but not the job level, you can use these variables in conditions.

Output variables are only available in the next downstream stage. If multiple stages consume the same output variable, use the `dependsOn` condition.

Copy

```lang-yaml
stages:
- stage: One
  jobs:
  - job: A
    steps:
    - task: MyTask@1  # this step generates the output variable
      name: ProduceVar  # because we're going to depend on it, we need to name the step

- stage: Two
  dependsOn:
  - One
  jobs:
  - job: B
    variables:
      # map the output variable from A into this job
      varFromA: $[ stageDependencies.One.A.outputs['ProduceVar.MyVar'] ]
    steps:
    - script: echo $(varFromA) # this step uses the mapped-in variable

- stage: Three
  dependsOn:
  - One
  - Two
  jobs:
  - job: C
    variables:
      # map the output variable from A into this job
      varFromA: $[ stageDependencies.One.A.outputs['ProduceVar.MyVar'] ]
    steps:
    - script: echo $(varFromA) # this step uses the mapped-in variable

```

You can also pass variables between stages with a file input. To do so, you'll need to define variables in the second stage at the job level, and then pass the variables as `env:` inputs.

Copy

```lang-bash
## script-a.sh
echo "##vso[task.setvariable variable=sauce;isOutput=true]crushed tomatoes"

```

Copy

```lang-bash
## script-b.sh
echo 'Hello file version'
echo $skipMe
echo $StageSauce

```

Copy

```lang-yaml
## azure-pipelines.yml
stages:

- stage: one
  jobs:
  - job: A
    steps:
    - task: Bash@3
      inputs:
          filePath: 'script-a.sh'
      name: setvar
    - bash: |
       echo "##vso[task.setvariable variable=skipsubsequent;isOutput=true]true"
      name: skipstep

- stage: two
  jobs:
  - job: B
    variables:
      - name: StageSauce
        value: $[ stageDependencies.one.A.outputs['setvar.sauce'] ]
      - name: skipMe
        value: $[ stageDependencies.one.A.outputs['skipstep.skipsubsequent'] ]
    steps:
    - task: Bash@3
      inputs:
        filePath: 'script-b.sh'
      name: fileversion
      env:
        StageSauce: $(StageSauce) # predefined in variables section
        skipMe: $(skipMe) # predefined in variables section
    - task: Bash@3
      inputs:
        targetType: 'inline'
        script: |
          echo 'Hello inline version'
          echo $(skipMe)
          echo $(StageSauce)

```

The output from stages in the preceding pipeline looks like this:

Copy

```lang-text
Hello inline version
true
crushed tomatoes

```

[Section titled: Use outputs in the same job](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#use-outputs-in-the-same-job-1)

### Use outputs in the same job

In the **Output variables** section, give the producing task a reference name.
Then, in a downstream step, you can use the form `$(<ReferenceName>.<VariableName>)` to refer to output variables.

[Section titled: Use outputs in a different job](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#use-outputs-in-a-different-job-1)

### Use outputs in a different job

You must use YAML to consume output variables in a different job.

There's no [**az pipelines**](https://learn.microsoft.com/en-us/cli/azure/pipelines) command that applies to using output variables from tasks.

Azure DevOps CLI commands aren't supported for Azure DevOps Server.

[Section titled: List variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#list-variables)

## List variables

You can list all of the variables in your pipeline with the [az pipelines variable list](https://learn.microsoft.com/en-us/cli/azure/pipelines/variable#az-pipelines-variable-list) command. To get started, see [Get started with Azure DevOps CLI](https://learn.microsoft.com/en-us/azure/devops/cli/?view=azure-devops).

Copy

```lang-azurecli
az pipelines variable list [--org]
                           [--pipeline-id]
                           [--pipeline-name]
                           [--project]

```

[Section titled: Parameters](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#parameters-3)

#### Parameters

- **org**: Azure DevOps organization URL. You can configure the default organization using `az devops configure -d organization=ORG_URL`. Required if not configured as default or picked up using `git config`. Example: `--org https://dev.azure.com/MyOrganizationName/`.
- **pipeline-id**: Required if **pipeline-name** isn't supplied. ID of the pipeline.
- **pipeline-name**: Required if **pipeline-id** isn't supplied, but ignored if **pipeline-id** is supplied. Name of the pipeline.
- **project**: Name or ID of the project. You can configure the default project using `az devops configure -d project=NAME_OR_ID`. Required if not configured as default or picked up by using `git config`.

[Section titled: Example](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#example-3)

#### Example

The following command lists all of the variables in the pipeline with ID **12** and shows the result in table format.

Copy

```lang-azurecli
az pipelines variable list --pipeline-id 12 --output table

Name           Allow Override    Is Secret    Value
-------------  ----------------  -----------  ------------
MyVariable     False             False        platform
NextVariable   False             True         platform
Configuration  False             False        config.debug

```

[Section titled: Set variables in scripts](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#set-variables-in-scripts)

## Set variables in scripts

Scripts can define variables that are later consumed in subsequent steps in the pipeline. All variables set by this method are treated as strings. To set a variable from a script, you use a command syntax and print to stdout.

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_4_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_4_classic)
- [Azure DevOps CLI](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_4_azure-devops-cli)

[Section titled: Set a job-scoped variable from a script](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#set-a-job-scoped-variable-from-a-script)

### Set a job-scoped variable from a script

To set a variable from a script, you use the `task.setvariable` [logging command](https://learn.microsoft.com/en-us/azure/devops/pipelines/scripts/logging-commands?view=azure-devops). This updates the environment variables for subsequent jobs. Subsequent jobs have access to the new variable with [macro syntax](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#understand-variable-syntax) and in tasks as environment variables.

When `issecret` is true, the value of the variable will be saved as secret and masked from the log. For more information on secret variables, see [logging commands](https://learn.microsoft.com/en-us/azure/devops/pipelines/scripts/logging-commands?view=azure-devops).

Copy

```lang-yaml
steps:
# Create a variable
- bash: |
    echo "##vso[task.setvariable variable=sauce]crushed tomatoes" # remember to use double quotes

# Use the variable
# "$(sauce)" is replaced by the contents of the `sauce` variable by Azure Pipelines
# before handing the body of the script to the shell.
- bash: |
    echo my pipeline variable is $(sauce)

```

Subsequent steps will also have the pipeline variable added to their environment. You can't use the variable in the step that it's defined.

Copy

```lang-yaml
steps:
# Create a variable
# Note that this does not update the environment of the current script.
- bash: |
    echo "##vso[task.setvariable variable=sauce]crushed tomatoes"

# An environment variable called `SAUCE` has been added to all downstream steps
- bash: |
    echo "my environment variable is $SAUCE"
- pwsh: |
    Write-Host "my environment variable is $env:SAUCE"

```

The output from the preceding pipeline.

Copy

```lang-text
my environment variable is crushed tomatoes
my environment variable is crushed tomatoes

```

[Section titled: Set a multi-job output variable](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#set-a-multi-job-output-variable)

### Set a multi-job output variable

If you want to make a variable available to future jobs, you must mark it as
an output variable by using `isOutput=true`. Then you can map it into future jobs by using the `$[]` syntax and including the step name that set the variable. Multi-job output variables only work for jobs in the same stage.

To pass variables to jobs in different stages, use the [stage dependencies](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/expressions?view=azure-devops#dependencies) syntax.

Note

By default, each stage in a pipeline depends on the one just before it in the YAML file. Therefore, each stage can use output variables from the prior stage. To access further stages, you will need to alter the dependency graph, for instance, if stage 3 requires a variable from stage 1, you will need to declare an explicit dependency on stage 1.

When you create a multi-job output variable, you should assign the expression to a variable. In this YAML, `$[ dependencies.A.outputs['setvarStep.myOutputVar'] ]` is assigned to the variable `$(myVarFromJobA)`.

Copy

```lang-yaml
jobs:
# Set an output variable from job A
- job: A
  pool:
    vmImage: 'windows-latest'
  steps:
  - powershell: echo "##vso[task.setvariable variable=myOutputVar;isOutput=true]this is the value"
    name: setvarStep
  - script: echo $(setvarStep.myOutputVar)
    name: echovar

# Map the variable into job B
- job: B
  dependsOn: A
  pool:
    vmImage: 'ubuntu-latest'
  variables:
    myVarFromJobA: $[ dependencies.A.outputs['setvarStep.myOutputVar'] ]  # map in the variable
                                                                          # remember, expressions require single quotes
  steps:
  - script: echo $(myVarFromJobA)
    name: echovar

```

The output from the preceding pipeline.

Copy

```lang-text
this is the value
this is the value

```

If you're setting a variable from one stage to another, use `stageDependencies`.

Copy

```lang-yaml
stages:
- stage: A
  jobs:
  - job: A1
    steps:
     - bash: echo "##vso[task.setvariable variable=myStageOutputVar;isOutput=true]this is a stage output var"
       name: printvar

- stage: B
  dependsOn: A
  variables:
    myVarfromStageA: $[ stageDependencies.A.A1.outputs['printvar.myStageOutputVar'] ]
  jobs:
  - job: B1
    steps:
    - script: echo $(myVarfromStageA)

```

If you're setting a variable from a [matrix](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/phases?view=azure-devops&tab=yaml#multi-job-configuration)
or [slice](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/phases?view=azure-devops&tab=yaml#slicing), then to reference the variable when you access it from a downstream job,
you must include:

- The name of the job.
- The step.

Copy

```lang-yaml
jobs:

# Set an output variable from a job with a matrix
- job: A
  pool:
    vmImage: 'ubuntu-latest'
  strategy:
    maxParallel: 2
    matrix:
      debugJob:
        configuration: debug
        platform: x64
      releaseJob:
        configuration: release
        platform: x64
  steps:
  - bash: echo "##vso[task.setvariable variable=myOutputVar;isOutput=true]this is the $(configuration) value"
    name: setvarStep
  - bash: echo $(setvarStep.myOutputVar)
    name: echovar

# Map the variable from the debug job
- job: B
  dependsOn: A
  pool:
    vmImage: 'ubuntu-latest'
  variables:
    myVarFromJobADebug: $[ dependencies.A.outputs['debugJob.setvarStep.myOutputVar'] ]
  steps:
  - script: echo $(myVarFromJobADebug)
    name: echovar

```

Copy

```lang-yaml
jobs:

# Set an output variable from a job with slicing
- job: A
  pool:
    vmImage: 'ubuntu-latest'
    parallel: 2 # Two slices
  steps:
  - bash: echo "##vso[task.setvariable variable=myOutputVar;isOutput=true]this is the slice $(system.jobPositionInPhase) value"
    name: setvarStep
  - script: echo $(setvarStep.myOutputVar)
    name: echovar

# Map the variable from the job for the first slice
- job: B
  dependsOn: A
  pool:
    vmImage: 'ubuntu-latest'
  variables:
    myVarFromJobsA1: $[ dependencies.A.outputs['job1.setvarStep.myOutputVar'] ]
  steps:
  - script: "echo $(myVarFromJobsA1)"
    name: echovar

```

Be sure to prefix the job name to the output variables of a [deployment](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/deployment-jobs?view=azure-devops) job. In this case, the job name is `A`:

Copy

```lang-yaml
jobs:

# Set an output variable from a deployment
- deployment: A
  pool:
    vmImage: 'ubuntu-latest'
  environment: staging
  strategy:
    runOnce:
      deploy:
        steps:
        - bash: echo "##vso[task.setvariable variable=myOutputVar;isOutput=true]this is the deployment variable value"
          name: setvarStep
        - bash: echo $(setvarStep.myOutputVar)
          name: echovar

# Map the variable from the job for the first slice
- job: B
  dependsOn: A
  pool:
    vmImage: 'ubuntu-latest'
  variables:
    myVarFromDeploymentJob: $[ dependencies.A.outputs['A.setvarStep.myOutputVar'] ]
  steps:
  - bash: "echo $(myVarFromDeploymentJob)"
    name: echovar

```

[Section titled: Set a job-scoped variable from a script](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#set-a-job-scoped-variable-from-a-script-1)

### Set a job-scoped variable from a script

To set a variable from a script, use the `task.setvariable` logging command.
This doesn't update the environment variables, but it does make the new
variable available to downstream steps within the same job.

Tip

You can run a script on a:

- [Windows agent](https://learn.microsoft.com/en-us/azure/devops/pipelines/agents/windows-agent?view=azure-devops) using either a [Batch script task](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/batch-script-v1) or [PowerShell script task](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/powershell-v2).
- [macOS](https://learn.microsoft.com/en-us/azure/devops/pipelines/agents/osx-agent?view=azure-devops) or [Linux](https://learn.microsoft.com/en-us/azure/devops/pipelines/agents/linux-agent?view=azure-devops) agent using a [Shell script task](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/shell-script-v2).

- [Batch](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_1_batch)
- [PowerShell](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_1_powershell)
- [Shell](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_1_shell)

**Batch script**

![](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/utility/media/batch-script.png?view=azure-devops)
Set the `sauce` and `secret.Sauce` variables

Copy

```lang-bat
@echo ##vso[task.setvariable variable=sauce]crushed tomatoes
@echo ##vso[task.setvariable variable=secret.Sauce;issecret=true]crushed tomatoes with garlic

```

![](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/utility/media/batch-script.png?view=azure-devops)
Read the variables

Arguments

Copy

```lang-arguments
"$(sauce)" "$(secret.Sauce)"

```

Script

Copy

```lang-bat
@echo off
set sauceArgument=%~1
set secretSauceArgument=%~2
@echo No problem reading %sauceArgument% or %SAUCE%
@echo But I cannot read %SECRET_SAUCE%
@echo But I can read %secretSauceArgument% (but the log is redacted so I do not spoil
     the secret)

```

**PowerShell script**

![](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/utility/media/powershell.png?view=azure-devops)
Set the `sauce` and `secret.Sauce` variables

Copy

```lang-powershell
Write-Host "##vso[task.setvariable variable=sauce]crushed tomatoes"
Write-Host "##vso[task.setvariable variable=secret.Sauce;issecret=true]crushed tomatoes with
            garlic"

```

![](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/utility/media/powershell.png?view=azure-devops)
Read the variables

Arguments

Copy

```lang-arguments
-sauceArgument "$(sauce)" -secretSauceArgument "$(secret.Sauce)"

```

Script

Copy

```lang-powershell
Param(
   [string]$sauceArgument,
   [string]$secretSauceArgument
)
Write-Host No problem reading $env:SAUCE or $sauceArgument
Write-Host But I cannot read $env:SECRET_SAUCE
Write-Host But I can read $secretSauceArgument "(but the log is redacted so I do not
           spoil the secret)"

```

![](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/utility/media/shell-script.png?view=azure-devops)
Set the `sauce` and `secret.Sauce` variables

Copy

```lang-bash
#!/bin/bash
echo "##vso[task.setvariable variable=sauce]crushed tomatoes"
echo "##vso[task.setvariable variable=secret.Sauce;issecret=true]crushed tomatoes with garlic"

```

![](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/utility/media/shell-script.png?view=azure-devops)
Read the variables

Arguments

Copy

```lang-arguments
"$(sauce)" "$(secret.Sauce)"

```

Script

Copy

```lang-bash
#!/bin/bash
echo "No problem reading $1 or $SAUCE"
echo "But I cannot read $SECRET_SAUCE"
echo "But I can read $2 (but the log is redacted so I do not spoil the secret)"

```

Console output from reading the variables:

Copy

```lang-output
No problem reading crushed tomatoes or crushed tomatoes
But I cannot read
But I can read ******** (but the log is redacted so I do not spoil the secret)

```

[Section titled: Use variables as task inputs](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#use-variables-as-task-inputs)

### Use variables as task inputs

In order to use a variable as a task input, you must make the variable an output variable, and you must give the producing task a reference name.
You can set a task's reference name on the **Output Variables** section of the task editor.
For instance, a script task whose output variable reference name is `producer` might have the following contents:

Copy

```lang-cmd
mkdir myDir
echo ##vso[task.setvariable variable=newworkdir;isOutput=true]$(System.DefaultWorkingDirectory)\myDir

```

The output variable `newworkdir` can be referenced in the input of a downstream task as `$(producer.newworkdir)`.

[Section titled: Set a multi-job output variable](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#set-a-multi-job-output-variable-1)

### Set a multi-job output variable

You can't pass a variable from one job to another job of a build pipeline, unless you use YAML.

There's no [**az pipelines**](https://learn.microsoft.com/en-us/cli/azure/pipelines) command that applies to setting variables in scripts.

Azure DevOps CLI commands aren't supported for Azure DevOps Server.

[Section titled: Set variables by using expressions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#set-variables-by-using-expressions)

## Set variables by using expressions

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_5_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_5_classic)
- [Azure DevOps CLI](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_5_azure-devops-cli)

You can set a variable by using an expression. We already encountered one case of this to set a variable to the output of another from a previous job.

Copy

```lang-yaml
- job: B
  dependsOn: A
  variables:
    myVarFromJobsA1: $[ dependencies.A.outputs['job1.setvarStep.myOutputVar'] ] # remember to use single quotes

```

You can use any of the supported expressions for setting a variable. Here's an example of setting a variable to act as a counter that starts at 100, gets incremented by 1 for every run, and gets reset to 100 every day.

Copy

```lang-yaml
jobs:
- job:
  variables:
    a: $[counter(format('{0:yyyyMMdd}', pipeline.startTime), 100)]
  steps:
  - bash: echo $(a)

```

For more information about counters, dependencies, and other expressions, see [expressions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/expressions?view=azure-devops).

You can use any of the supported expressions for setting a variable. Here's an example of setting a variable to act as a counter that starts at 100, gets incremented by 1 for every run, and gets reset to 100 every day.

- In the variables of a build pipeline, set a variable `a` to this value: `$[counter(format('{0:yyyyMMdd}', pipeline.startTime), 100)]`

For more information about counters and other expressions, see [expressions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/expressions?view=azure-devops).

There's no [**az pipelines**](https://learn.microsoft.com/en-us/cli/azure/pipelines) command that applies to setting variables using expressions.

Azure DevOps CLI commands aren't supported for Azure DevOps Server.

[Section titled: Configure settable variables for steps](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#configure-settable-variables-for-steps)

## Configure settable variables for steps

You can define `settableVariables` within a step or specify that no variables can be set.

In this example, the script can't set a variable.

Copy

```lang-yaml
steps:
- script: echo This is a step
  target:
    settableVariables: none

```

In this example, the script allows the variable `sauce` but not the variable `secretSauce`. You'll see a warning on the pipeline run page.

![Warning that you can't set secretSauce.](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/media/set-vars-warning.png?view=azure-devops)

Copy

```lang-yaml
steps:
  - bash: |
      echo "##vso[task.setvariable variable=Sauce;]crushed tomatoes"
      echo "##vso[task.setvariable variable=secretSauce;]crushed tomatoes with garlic"
    target:
     settableVariables:
      - sauce
    name: SetVars
  - bash:
      echo "Sauce is $(sauce)"
      echo "secretSauce is $(secretSauce)"
    name: OutputVars

```

[Section titled: Allow at queue time](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#allow-at-queue-time)

## Allow at queue time

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_6_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_6_classic)
- [Azure DevOps CLI](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_6_azure-devops-cli)

If a variable appears in the `variables` block of a YAML file, its value is fixed and can't be overridden at queue time. Best practice is to define your variables in a YAML file but there are times when this doesn't make sense. For example, you might want to define a secret variable and not have the variable exposed in your YAML. Or, you might need to manually set a variable value during the pipeline run.

You have two options for defining queue-time values. You can define a variable in the UI and select the option to **Let users override this value when running this pipeline** or you can use [runtime parameters](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/runtime-parameters?view=azure-devops) instead. If your variable isn't a secret, the best practice is to use [runtime parameters](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/runtime-parameters?view=azure-devops).

To set a variable at queue time, add a new variable within your pipeline and select the override option. Only users with the _Edit queue build configuration_ permission can change a variable's value.

![Set a variable at queue time.](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/media/set-queue-time-variable.png?view=azure-devops)

To allow a variable to be set at queue time, make sure the variable doesn't also appear in the `variables` block of a pipeline or job. If you define a variable in both the variables block of a YAML and in the UI, the value in the YAML has priority.

For added security, use a predefined set of values for settable at queue time variables and safe types such as booleans and integers. For strings, use a predefined set of values.

You can choose which variables are allowed to be set at queue time, and which are fixed by the pipeline author.
To do this, select the variable in the **Variables** tab of the build pipeline, and mark it as **Settable at release time**.

![Set variable during the release.](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/media/checks/classic-settable-at-release.png?view=azure-devops)

To choose which variables are allowed to be set at queue time using the Azure DevOps CLI, see [Create a variable](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#create-variable) or [Update a variable](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#update-variable).

Azure DevOps CLI commands aren't supported for Azure DevOps Server.

[Section titled: Expansion of variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#expansion-of-variables)

## Expansion of variables

- [YAML](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_7_yaml)
- [Classic](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_7_classic)
- [Azure DevOps CLI](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#tabpanel_7_azure-devops-cli)

When you set a variable with the same name in multiple scopes, the following precedence applies (highest precedence first).

1. Job level variable set in the YAML file
2. Stage level variable set in the YAML file
3. Pipeline level variable set in the YAML file
4. Variable set at queue time
5. Pipeline variable set in Pipeline settings UI

In the following example, the same variable `a` is set at the pipeline level and job level in YAML file. It's also set in a variable group `G`, and as a variable in the Pipeline settings UI.

Copy

```lang-yaml
variables:
  a: 'pipeline yaml'

stages:
- stage: one
  displayName: one
  variables:
  - name: a
    value: 'stage yaml'

  jobs:
  - job: A
    variables:
    - name: a
      value: 'job yaml'
    steps:
    - bash: echo $(a)        # This will be 'job yaml'

```

When you set a variable with the same name in the same scope, the last set value takes precedence.

Copy

```lang-yaml
stages:
- stage: one
  displayName: Stage One
  variables:
    - name: a
      value: alpha
    - name: a
      value: beta
  jobs:
  - job: I
    displayName: Job I
    variables:
      - name: b
        value: uno
      - name: b
        value: dos
    steps:
    - script: echo $(a) #outputs beta
    - script: echo $(b) #outputs dos

```

Note

When you set a variable in the YAML file, don't define it in the web editor as settable at queue time. You can't currently change variables that are set in the YAML file at queue time. If you need a variable to be settable at queue time, don't set it in the YAML file.

Variables are expanded once when the run is started, and again at the beginning of each step. For example:

Copy

```lang-yaml
jobs:
- job: A
  variables:
    a: 10
  steps:
  - bash: |
      echo $(a)            # This will be 10
      echo '##vso[task.setvariable variable=a]20'
      echo $(a)            # This will also be 10, since the expansion of $(a) happens before the step
  - bash: echo $(a)        # This will be 20, since the variables are expanded just before the step

```

There are two steps in the preceding example. The expansion of `$(a)` happens once at the beginning of the job, and once at the beginning of each of the two steps.

Because variables are expanded at the beginning of a job, you can't use them in a strategy. In the following example, you can't use the variable `a` to expand the job matrix, because the variable is only available at the beginning of each expanded job.

Copy

```lang-yaml
jobs:
- job: A
  variables:
    a: 10
  strategy:
    matrix:
      x:
        some_variable: $(a)    # This does not work

```

If the variable `a` is an output variable from a previous job, then you can use it in a future job.

Copy

```lang-yaml
- job: A
  steps:
  - powershell: echo "##vso[task.setvariable variable=a;isOutput=true]10"
    name: a_step

# Map the variable into job B
- job: B
  dependsOn: A
  variables:
    some_variable: $[ dependencies.A.outputs['a_step.a'] ]

```

[Section titled: Recursive expansion](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#recursive-expansion)

### Recursive expansion

On the agent, variables referenced using `$( )` syntax are recursively expanded.
For example:

Copy

```lang-yaml
variables:
  myInner: someValue
  myOuter: $(myInner)

steps:
- script: echo $(myOuter)  # prints "someValue"
  displayName: Variable is $(myOuter)  # display name is "Variable is someValue"

```

When you set a variable with the same name in multiple scopes, the following precedence applies (highest precedence first).

1. Variable set at queue time
2. Variable set in the pipeline
3. Variable set in the variable group

Variables are expanded once when the run is started, and again at the beginning of each step. Here's an example to demonstrate this:

- You set a variable called `a` to 10 in a pipeline.

- In one of the steps (a bash script step), run the following script:

Copy




```lang-bash
echo $(a)            # This will be 10
echo '##vso[task.setvariable variable=a]20'
echo $(a)            # This will also be 10, since the expansion of $(a) happens before the step

```

- In the next step (another bash script step), run the following script:

Copy




```lang-bash
echo $(a)            # This will be 20, since the variables are expanded just before the step

```


There's no [**az pipelines**](https://learn.microsoft.com/en-us/cli/azure/pipelines) command that applies to the expansion of variables.

Azure DevOps CLI commands aren't supported for Azure DevOps Server.

[Section titled: Related articles](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#related-articles)

## Related articles

- [Set variables in scripts](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/set-variables-scripts?view=azure-devops)
- [Use predefined variables](https://learn.microsoft.com/en-us/azure/devops/pipelines/build/variables?view=azure-devops)
- [Expressions](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/expressions?view=azure-devops)
- [Variable group](https://learn.microsoft.com/en-us/azure/devops/pipelines/library/variable-groups?view=azure-devops)

**Note:** The author created this article with assistance from AI. [Learn more](https://learn.microsoft.com/principles-for-ai-generated-content)

* * *

## Feedback

Was this page helpful?


YesNo

* * *

## Additional resources

Training


Module


[Configure secure access to Azure Repos from pipelines - Training](https://learn.microsoft.com/en-us/training/modules/configure-secure-access-azure-repos-from-pipelines/?source=recommendations)

Configure secure access to Azure Repos from pipelines.


Please sign in to use this experience.

[Sign in](https://learn.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&tabs=yaml%2Cbatch#)

---


## 8. Artifacts in Azure Pipelines - overview {#section-8}

*Source: [https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview)*

Table of contents Exit focus mode

Ask LearnAsk Learn

Table of contents[Read in English](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver)Add to CollectionsAdd to plan[Edit](https://github.com/MicrosoftDocs/azure-devops-docs/blob/main/docs/pipelines/artifacts/artifacts-overview.md)

* * *

#### Share via

[Facebook](https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fartifacts%2Fartifacts-overview%3Fview%3Dazure-devops%26tabs%3Dnuget%252Cnugetserver%26WT.mc_id%3Dfacebook) [x.com](https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fartifacts%2Fartifacts-overview%3Fview%3Dazure-devops%26tabs%3Dnuget%252Cnugetserver%26WT.mc_id%3Dtwitter&text=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fartifacts%2Fartifacts-overview%3Fview%3Dazure-devops%26tabs%3Dnuget%252Cnugetserver%26WT.mc_id%3Dtwitter&tw_p=tweetbutton&url=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fartifacts%2Fartifacts-overview%3Fview%3Dazure-devops%26tabs%3Dnuget%252Cnugetserver%26WT.mc_id%3Dtwitter) [LinkedIn](https://www.linkedin.com/feed/?shareActive=true&text=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fartifacts%2Fartifacts-overview%3Fview%3Dazure-devops%26tabs%3Dnuget%252Cnugetserver%26WT.mc_id%3Dlinkedin) [Email](mailto:?subject=%5BShared%20Article%5D%20Artifacts%20in%20Azure%20Pipelines%20-%20Azure%20Pipelines%20%7C%20Microsoft%20Learn&body=%0A%0D%0Ahttps%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fazure%2Fdevops%2Fpipelines%2Fartifacts%2Fartifacts-overview%3Fview%3Dazure-devops%26tabs%3Dnuget%252Cnugetserver%26WT.mc_id%3Demail)

* * *

Print

* * *

Note

Access to this page requires authorization. You can try [signing in](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#) or changing directories.


Access to this page requires authorization. You can try changing directories.


# Artifacts in Azure Pipelines - overview

- 02/10/2025

Feedback

**Azure DevOps Services \| Azure DevOps Server 2022 \| Azure DevOps Server 2020**

Azure Artifacts allow developers to publish and consume various types of packages from feeds and public registries like PyPI, Maven Central, and NuGet.org. You can combine Azure Artifacts with Azure Pipelines to publish build and pipeline artifacts, deploy packages, or integrate files across different stages of your pipeline for building, testing, or deploying your application.

[Section titled: Supported artifacts](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#supported-artifacts)

## Supported artifacts

Expand table

| Artifact type | Description |
| --- | --- |
| [Build artifacts](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/build-artifacts?view=azure-devops) | The files generated by a build. Example: .dll, .exe, and .PDB files. |
| [Pipeline artifacts](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/pipeline-artifacts?view=azure-devops) | Recommended for faster performance if you are using Azure DevOps Services. Not supported in release pipelines. |
| NuGet | Publish NuGet packages to Azure Artifacts feeds or public registries such as nuget.org. |
| npm | Publish npm packages to Azure Artifacts feeds or public registries such as npmjs.com. |
| Maven | Publish Maven packages to Azure Artifacts feeds or public registries such as Maven Central, Google Maven Repository, Gradle Plugins, and JitPack. |
| Python | Publish Python packages to Azure Artifacts feeds or public registries such as PyPI.org. |
| Cargo | Publish Cargo packages to Azure Artifacts feeds or public registries such as Crates.io. |
| Universal Packages | Publish Universal Packages to Azure Artifacts feeds or Universal Packages upstream sources. |
| Symbols | Publish symbols to Azure Artifacts symbol server or to a file share. |

[Section titled: Publish artifacts](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#publish-artifacts)

## Publish artifacts

- [NuGet](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#tabpanel_1_nuget)
- [Npm](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#tabpanel_1_npm)
- [Python](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#tabpanel_1_python)
- [Maven](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#tabpanel_1_maven)
- [Gradle](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#tabpanel_1_gradle)
- [Universal Packages](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#tabpanel_1_universal-packages)

[Publish NuGet packages with Azure Pipelines (YAML/Classic)](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/nuget?view=azure-devops)

[Publish npm packages (YAML/Classic)](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/package/npm?view=azure-devops#publish-npm-packages)

[Publish Python packages with Azure Pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/pypi?view=azure-devops)

[Publish Maven artifacts with Azure Pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/publish-maven-artifacts?view=azure-devops)

[Build and publish artifacts with Gradle and Azure Pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/build-publish-artifacts-gradle?view=azure-devops)

[Publish and download Universal Packages with Azure Pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/universal-packages?view=azure-devops)

[Section titled: Supported artifacts](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#supported-artifacts-1)

## Supported artifacts

Expand table

| Artifact type | Description |
| --- | --- |
| [Build artifacts](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/build-artifacts?view=azure-devops) | The files generated by a build. Example: .dll, .exe, and .PDB files. |
| NuGet | Publish NuGet packages to Azure Artifacts feeds or public registries such as nuget.org. |
| npm | Publish npm packages to Azure Artifacts feeds or public registries such as npmjs.com. |
| Maven | Publish Maven packages to Azure Artifacts feeds or public registries such as Maven Central, Google Maven Repository, Gradle Plugins, and JitPack. |
| Python | Publish Python packages to Azure Artifacts feeds or public registries such as PyPI.org. |
| Symbols | Publish symbols to Azure Artifacts symbol server or to a file share. |

[Section titled: Publish artifacts](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#publish-artifacts-1)

## Publish artifacts

- [NuGet](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#tabpanel_2_nugetserver)
- [Npm](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#tabpanel_2_npmserver)
- [Maven](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#tabpanel_2_mavenserver)
- [Gradle](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#tabpanel_2_gradleserver)
- [Python](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#tabpanel_2_pythonserver)

[Publish NuGet packages with Azure Pipelines (YAML/Classic)](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/nuget?view=azure-devops)

[Publish npm packages (YAML/Classic)](https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/package/npm?view=azure-devops#publish-npm-packages)

[Publish Maven artifacts with Azure Pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/publish-maven-artifacts?view=azure-devops)

[Build and publish artifacts with Gradle and Azure Pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/build-publish-artifacts-gradle?view=azure-devops)

[Publish Python packages with Azure Pipelines](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/pypi?view=azure-devops)

Tip

If your organization is using a firewall or a proxy server, make sure you allow [Azure Artifacts Domain URLs and IP addresses](https://learn.microsoft.com/en-us/azure/devops/organizations/security/allow-list-ip-url?view=azure-devops#azure-artifacts).

[Section titled: Related articles](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#related-articles)

## Related articles

- [Publish and download pipeline artifacts](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/pipeline-artifacts?view=azure-devops)

- [Publish and download build artifacts](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/build-artifacts?view=azure-devops)

- [Artifact sources](https://learn.microsoft.com/en-us/azure/devops/pipelines/release/artifacts?view=azure-devops)


* * *

## Feedback

Was this page helpful?


YesNo

* * *

## Additional resources

Please sign in to use this experience.

[Sign in](https://learn.microsoft.com/en-us/azure/devops/pipelines/artifacts/artifacts-overview?view=azure-devops&tabs=nuget%2Cnugetserver#)

---
